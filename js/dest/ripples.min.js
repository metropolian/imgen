!function(t,e,o,i){"use strict";function n(e,o){a=this,this.element=t(e),this.options=t.extend({},p,o),this._defaults=p,this._name=r,this.init()}var r="ripples",a=null,p={};n.prototype.init=function(){var o=this.element;o.on("mousedown touchstart",function(i){if(!a.isTouch()||"mousedown"!==i.type){o.find(".ripple-wrapper").length||o.append('<div class="ripple-wrapper"></div>');var n=o.children(".ripple-wrapper"),r=a.getRelY(n,i),p=a.getRelX(n,i);if(r||p){var s=a.getRipplesColor(o),u=t("<div></div>");u.addClass("ripple").css({left:p,top:r,"background-color":s}),n.append(u),function(){return e.getComputedStyle(u[0]).opacity}(),a.rippleOn(o,u),setTimeout(function(){a.rippleEnd(u)},500),o.on("mouseup mouseleave touchend",function(){u.data("mousedown","off"),"off"===u.data("animating")&&a.rippleOut(u)})}}})},n.prototype.getNewSize=function(t,e){return Math.max(t.outerWidth(),t.outerHeight())/e.outerWidth()*2.5},n.prototype.getRelX=function(t,e){var o=t.offset();return a.isTouch()?(e=e.originalEvent,1===e.touches.length&&e.touches[0].pageX-o.left):e.pageX-o.left},n.prototype.getRelY=function(t,e){var o=t.offset();return a.isTouch()?(e=e.originalEvent,1===e.touches.length&&e.touches[0].pageY-o.top):e.pageY-o.top},n.prototype.getRipplesColor=function(t){var o=t.data("ripple-color")?t.data("ripple-color"):e.getComputedStyle(t[0]).color;return o},n.prototype.hasTransitionSupport=function(){var t=o.body||o.documentElement,e=t.style,n=e.transition!==i||e.WebkitTransition!==i||e.MozTransition!==i||e.MsTransition!==i||e.OTransition!==i;return n},n.prototype.isTouch=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},n.prototype.rippleEnd=function(t){t.data("animating","off"),"off"===t.data("mousedown")&&a.rippleOut(t)},n.prototype.rippleOut=function(t){t.off(),a.hasTransitionSupport()?t.addClass("ripple-out"):t.animate({opacity:0},100,function(){t.trigger("transitionend")}),t.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){t.remove()})},n.prototype.rippleOn=function(t,e){var o=a.getNewSize(t,e);a.hasTransitionSupport()?e.css({"-ms-transform":"scale("+o+")","-moz-transform":"scale("+o+")","-webkit-transform":"scale("+o+")",transform:"scale("+o+")"}).addClass("ripple-on").data("animating","on").data("mousedown","on"):e.animate({width:2*Math.max(t.outerWidth(),t.outerHeight()),height:2*Math.max(t.outerWidth(),t.outerHeight()),"margin-left":Math.max(t.outerWidth(),t.outerHeight())*-1,"margin-top":Math.max(t.outerWidth(),t.outerHeight())*-1,opacity:.2},500,function(){e.trigger("transitionend")})},t.fn.ripples=function(e){return this.each(function(){t.data(this,"plugin_"+r)||t.data(this,"plugin_"+r,new n(this,e))})}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJpcHBsZXMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwiUmlwcGxlcyIsImVsZW1lbnQiLCJvcHRpb25zIiwic2VsZiIsInRoaXMiLCJleHRlbmQiLCJkZWZhdWx0cyIsIl9kZWZhdWx0cyIsIl9uYW1lIiwicmlwcGxlcyIsImluaXQiLCJwcm90b3R5cGUiLCIkZWxlbWVudCIsIm9uIiwiZXZlbnQiLCJpc1RvdWNoIiwidHlwZSIsImZpbmQiLCJhcHBlbmQiLCIkd3JhcHBlciIsImNoaWxkcmVuIiwicmVsWSIsImdldFJlbFkiLCJyZWxYIiwiZ2V0UmVsWCIsInJpcHBsZUNvbG9yIiwiZ2V0UmlwcGxlc0NvbG9yIiwiJHJpcHBsZSIsImFkZENsYXNzIiwiY3NzIiwibGVmdCIsInRvcCIsImJhY2tncm91bmQtY29sb3IiLCJnZXRDb21wdXRlZFN0eWxlIiwib3BhY2l0eSIsInJpcHBsZU9uIiwic2V0VGltZW91dCIsInJpcHBsZUVuZCIsImRhdGEiLCJyaXBwbGVPdXQiLCJnZXROZXdTaXplIiwiTWF0aCIsIm1heCIsIm91dGVyV2lkdGgiLCJvdXRlckhlaWdodCIsIndyYXBwZXJPZmZzZXQiLCJvZmZzZXQiLCJvcmlnaW5hbEV2ZW50IiwidG91Y2hlcyIsImxlbmd0aCIsInBhZ2VYIiwicGFnZVkiLCJjb2xvciIsImhhc1RyYW5zaXRpb25TdXBwb3J0IiwidGhpc0JvZHkiLCJib2R5IiwiZG9jdW1lbnRFbGVtZW50IiwidGhpc1N0eWxlIiwic3R5bGUiLCJzdXBwb3J0IiwidHJhbnNpdGlvbiIsIldlYmtpdFRyYW5zaXRpb24iLCJNb3pUcmFuc2l0aW9uIiwiTXNUcmFuc2l0aW9uIiwiT1RyYW5zaXRpb24iLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwib2ZmIiwiYW5pbWF0ZSIsInRyaWdnZXIiLCJyZW1vdmUiLCJzaXplIiwiLW1zLXRyYW5zZm9ybSIsIi1tb3otdHJhbnNmb3JtIiwiLXdlYmtpdC10cmFuc2Zvcm0iLCJ0cmFuc2Zvcm0iLCJ3aWR0aCIsImhlaWdodCIsIm1hcmdpbi1sZWZ0IiwibWFyZ2luLXRvcCIsImZuIiwiZWFjaCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBR0EsU0FBVUEsRUFBR0MsRUFBUUMsRUFBVUMsR0FFN0IsWUF1QkEsU0FBU0MsR0FBUUMsRUFBU0MsR0FDeEJDLEVBQU9DLEtBRVBBLEtBQUtILFFBQVVMLEVBQUVLLEdBRWpCRyxLQUFLRixRQUFVTixFQUFFUyxVQUFXQyxFQUFVSixHQUV0Q0UsS0FBS0csVUFBWUQsRUFDakJGLEtBQUtJLE1BQVFDLEVBRWJMLEtBQUtNLE9BNUJQLEdBQUlELEdBQVUsVUFNVk4sRUFBTyxLQU1QRyxJQXVCSk4sR0FBUVcsVUFBVUQsS0FBTyxXQUN2QixHQUFJRSxHQUFZUixLQUFLSCxPQUVyQlcsR0FBU0MsR0FBRyx1QkFBd0IsU0FBU0MsR0FJM0MsSUFBR1gsRUFBS1ksV0FBNEIsY0FBZkQsRUFBTUUsS0FBM0IsQ0FTS0osRUFBU0ssS0FBSyxtQkFBeUIsUUFDMUNMLEVBQVNNLE9BQU8scUNBT2xCLElBQUlDLEdBQVdQLEVBQVNRLFNBQVMsbUJBTTdCQyxFQUFPbEIsRUFBS21CLFFBQVFILEVBQVVMLEdBQzlCUyxFQUFPcEIsRUFBS3FCLFFBQVFMLEVBQVVMLEVBTWxDLElBQUlPLEdBQVNFLEVBQWIsQ0FRQSxHQUFJRSxHQUFjdEIsRUFBS3VCLGdCQUFnQmQsR0FNbkNlLEVBQVUvQixFQUFFLGNBRWhCK0IsR0FDQ0MsU0FBUyxVQUNUQyxLQUNDQyxLQUFRUCxFQUNSUSxJQUFPVixFQUNQVyxtQkFBb0JQLElBT3RCTixFQUFTRCxPQUFPUyxHQU1oQixXQUFjLE1BQU85QixHQUFPb0MsaUJBQWlCTixFQUFRLElBQUlPLFdBTXpEL0IsRUFBS2dDLFNBQVN2QixFQUFVZSxHQU14QlMsV0FBVyxXQUNUakMsRUFBS2tDLFVBQVVWLElBQ2QsS0FNSGYsRUFBU0MsR0FBRyw4QkFBK0IsV0FDekNjLEVBQVFXLEtBQUssWUFBYSxPQUVPLFFB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RixFQUFFMEMsS0FBS2xDLEtBQU0sVUFBWUssSUFDM0JiLEVBQUUwQyxLQUFLbEMsS0FBTSxVQUFZSyxFQUFTLEdBQUlULEdBQVFJLEtBQU1GLFFBS3pEaUYsT0FBUXRGLE9BQVFDIiwiZmlsZSI6InJpcHBsZXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQ29weXJpZ2h0IDIwMTQrLCBGZWRlcmljbyBaaXZvbG8sIExJQ0VOU0UgYXQgaHR0cHM6Ly9naXRodWIuY29tL0ZlelZyYXN0YS9ib290c3RyYXAtbWF0ZXJpYWwtZGVzaWduL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgKi9cclxuLyogZ2xvYmFscyBqUXVlcnksIG5hdmlnYXRvciAqL1xyXG5cclxuKGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgLyoqXHJcbiAgICogRGVmaW5lIHRoZSBuYW1lIG9mIHRoZSBwbHVnaW5cclxuICAgKi9cclxuICB2YXIgcmlwcGxlcyA9IFwicmlwcGxlc1wiO1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFuIGluc3RhbmNlIG9mIHRoZSBwbHVnaW5cclxuICAgKi9cclxuICB2YXIgc2VsZiA9IG51bGw7XHJcblxyXG5cclxuICAvKipcclxuICAgKiBEZWZpbmUgdGhlIGRlZmF1bHRzIG9mIHRoZSBwbHVnaW5cclxuICAgKi9cclxuICB2YXIgZGVmYXVsdHMgPSB7fTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSB0aGUgbWFpbiBwbHVnaW4gZnVuY3Rpb25cclxuICAgKi9cclxuICBmdW5jdGlvbiBSaXBwbGVzKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuICAgIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHJcbiAgICB0aGlzLl9kZWZhdWx0cyA9IGRlZmF1bHRzO1xyXG4gICAgdGhpcy5fbmFtZSA9IHJpcHBsZXM7XHJcblxyXG4gICAgdGhpcy5pbml0KCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZSB0aGUgcGx1Z2luXHJcbiAgICovXHJcbiAgUmlwcGxlcy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyICRlbGVtZW50ICA9IHRoaXMuZWxlbWVudDtcclxuXHJcbiAgICAkZWxlbWVudC5vbihcIm1vdXNlZG93biB0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBWZXJpZnkgaWYgdGhlIHVzZXIgaXMganVzdCB0b3VjaGluZyBvbiBhIGRldmljZSBhbmQgcmV0dXJuIGlmIHNvXHJcbiAgICAgICAqL1xyXG4gICAgICBpZihzZWxmLmlzVG91Y2goKSAmJiBldmVudC50eXBlID09PSBcIm1vdXNlZG93blwiKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFZlcmlmeSBpZiB0aGUgY3VycmVudCBlbGVtZW50IGFscmVhZHkgaGFzIGEgcmlwcGxlIHdyYXBwZXIgZWxlbWVudCBhbmRcclxuICAgICAgICogY3JlYXRlcyBpZiBpdCBkb2Vzbid0XHJcbiAgICAgICAqL1xyXG4gICAgICBpZighKCRlbGVtZW50LmZpbmQoXCIucmlwcGxlLXdyYXBwZXJcIikubGVuZ3RoKSkge1xyXG4gICAgICAgICRlbGVtZW50LmFwcGVuZChcIjxkaXYgY2xhc3M9XFxcInJpcHBsZS13cmFwcGVyXFxcIj48L2Rpdj5cIik7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRmluZCB0aGUgcmlwcGxlIHdyYXBwZXJcclxuICAgICAgICovXHJcbiAgICAgIHZhciAkd3JhcHBlciA9ICRlbGVtZW50LmNoaWxkcmVuKFwiLnJpcHBsZS13cmFwcGVyXCIpO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXQgcmVsWSBhbmQgcmVsWCBwb3NpdGlvbnNcclxuICAgICAgICovXHJcbiAgICAgIHZhciByZWxZID0gc2VsZi5nZXRSZWxZKCR3cmFwcGVyLCBldmVudCk7XHJcbiAgICAgIHZhciByZWxYID0gc2VsZi5nZXRSZWxYKCR3cmFwcGVyLCBldmVudCk7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIElmIHJlbFkgYW5kL29yIHJlbFggYXJlIGZhbHNlLCByZXR1cm4gdGhlIGV2ZW50XHJcbiAgICAgICAqL1xyXG4gICAgICBpZighcmVsWSAmJiAhcmVsWCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXQgdGhlIHJpcHBsZSBjb2xvclxyXG4gICAgICAgKi9cclxuICAgICAgdmFyIHJpcHBsZUNvbG9yID0gc2VsZi5nZXRSaXBwbGVzQ29sb3IoJGVsZW1lbnQpO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBDcmVhdGUgdGhlIHJpcHBsZSBlbGVtZW50XHJcbiAgICAgICAqL1xyXG4gICAgICB2YXIgJHJpcHBsZSA9ICQoXCI8ZGl2PjwvZGl2PlwiKTtcclxuXHJcbiAgICAgICRyaXBwbGVcclxuICAgICAgLmFkZENsYXNzKFwicmlwcGxlXCIpXHJcbiAgICAgIC5jc3Moe1xyXG4gICAgICAgIFwibGVmdFwiOiByZWxYLFxyXG4gICAgICAgIFwidG9wXCI6IHJlbFksXHJcbiAgICAgICAgXCJiYWNrZ3JvdW5kLWNvbG9yXCI6IHJpcHBsZUNvbG9yXHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBBcHBlbmQgdGhlIHJpcHBsZSB0byB0aGUgd3JhcHBlclxyXG4gICAgICAgKi9cclxuICAgICAgJHdyYXBwZXIuYXBwZW5kKCRyaXBwbGUpO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBNYWtlIHN1cmUgdGhlIHJpcHBsZSBoYXMgdGhlIHN0eWxlcyBhcHBsaWVkICh1Z2x5IGhhY2sgYnV0IGl0IHdvcmtzKVxyXG4gICAgICAgKi9cclxuICAgICAgKGZ1bmN0aW9uKCkgeyByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoJHJpcHBsZVswXSkub3BhY2l0eTsgfSkoKTtcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVHVybiBvbiB0aGUgcmlwcGxlIGFuaW1hdGlvblxyXG4gICAgICAgKi9cclxuICAgICAgc2VsZi5yaXBwbGVPbigkZWxlbWVudCwgJHJpcHBsZSk7XHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIENhbGwgdGhlIHJpcHBsZUVuZCBmdW5jdGlvbiB3aGVuIHRoZSB0cmFuc2l0aW9uIFwib25cIiBlbmRzXHJcbiAgICAgICAqL1xyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNlbGYucmlwcGxlRW5kKCRyaXBwbGUpO1xyXG4gICAgICB9LCA1MDApO1xyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEZXRlY3Qgd2hlbiB0aGUgdXNlciBsZWF2ZXMgdGhlIGVsZW1lbnRcclxuICAgICAgICovXHJcbiAgICAgICRlbGVtZW50Lm9uKFwibW91c2V1cCBtb3VzZWxlYXZlIHRvdWNoZW5kXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRyaXBwbGUuZGF0YShcIm1vdXNlZG93blwiLCBcIm9mZlwiKTtcclxuXHJcbiAgICAgICAgaWYoJHJpcHBsZS5kYXRhKFwiYW5pbWF0aW5nXCIpID09PSBcIm9mZlwiKSB7XHJcbiAgICAgICAgICBzZWxmLnJpcHBsZU91dCgkcmlwcGxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIG5ldyBzaXplIGJhc2VkIG9uIHRoZSBlbGVtZW50IGhlaWdodC93aWR0aCBhbmQgdGhlIHJpcHBsZSB3aWR0aFxyXG4gICAqL1xyXG4gIFJpcHBsZXMucHJvdG90eXBlLmdldE5ld1NpemUgPSBmdW5jdGlvbigkZWxlbWVudCwgJHJpcHBsZSkge1xyXG5cclxuICAgIHJldHVybiAoTWF0aC5tYXgoJGVsZW1lbnQub3V0ZXJXaWR0aCgpLCAkZWxlbWVudC5vdXRlckhlaWdodCgpKSAvICRyaXBwbGUub3V0ZXJXaWR0aCgpKSAqIDIuNTtcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSByZWxYXHJcbiAgICovXHJcbiAgUmlwcGxlcy5wcm90b3R5cGUuZ2V0UmVsWCA9IGZ1bmN0aW9uKCR3cmFwcGVyLCAgZXZlbnQpIHtcclxuICAgIHZhciB3cmFwcGVyT2Zmc2V0ID0gJHdyYXBwZXIub2Zmc2V0KCk7XHJcblxyXG4gICAgaWYoIXNlbGYuaXNUb3VjaCgpKSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXQgdGhlIG1vdXNlIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSByaXBwbGUgd3JhcHBlclxyXG4gICAgICAgKi9cclxuICAgICAgcmV0dXJuIGV2ZW50LnBhZ2VYIC0gd3JhcHBlck9mZnNldC5sZWZ0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ha2Ugc3VyZSB0aGUgdXNlciBpcyB1c2luZyBvbmx5IG9uZSBmaW5nZXIgYW5kIHRoZW4gZ2V0IHRoZSB0b3VjaFxyXG4gICAgICAgKiBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgcmlwcGxlIHdyYXBwZXJcclxuICAgICAgICovXHJcbiAgICAgIGV2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuXHJcbiAgICAgIGlmKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggLSB3cmFwcGVyT2Zmc2V0LmxlZnQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSByZWxZXHJcbiAgICovXHJcbiAgUmlwcGxlcy5wcm90b3R5cGUuZ2V0UmVsWSA9IGZ1bmN0aW9uKCR3cmFwcGVyLCBldmVudCkge1xyXG4gICAgdmFyIHdyYXBwZXJPZmZzZXQgPSAkd3JhcHBlci5vZmZzZXQoKTtcclxuXHJcbiAgICBpZighc2VsZi5pc1RvdWNoKCkpIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldCB0aGUgbW91c2UgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHJpcHBsZSB3cmFwcGVyXHJcbiAgICAgICAqL1xyXG4gICAgICByZXR1cm4gZXZlbnQucGFnZVkgLSB3cmFwcGVyT2Zmc2V0LnRvcDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBNYWtlIHN1cmUgdGhlIHVzZXIgaXMgdXNpbmcgb25seSBvbmUgZmluZ2VyIGFuZCB0aGVuIGdldCB0aGUgdG91Y2hcclxuICAgICAgICogcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHJpcHBsZSB3cmFwcGVyXHJcbiAgICAgICAqL1xyXG4gICAgICBldmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcblxyXG4gICAgICBpZihldmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiBldmVudC50b3VjaGVzWzBdLnBhZ2VZIC0gd3JhcHBlck9mZnNldC50b3A7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSByaXBwbGUgY29sb3JcclxuICAgKi9cclxuICBSaXBwbGVzLnByb3RvdHlwZS5nZXRSaXBwbGVzQ29sb3IgPSBmdW5jdGlvbigkZWxlbWVudCkge1xyXG5cclxuICAgIHZhciBjb2xvciA9ICRlbGVtZW50LmRhdGEoXCJyaXBwbGUtY29sb3JcIikgPyAkZWxlbWVudC5kYXRhKFwicmlwcGxlLWNvbG9yXCIpIDogd2luZG93LmdldENvbXB1dGVkU3R5bGUoJGVsZW1lbnRbMF0pLmNvbG9yO1xyXG5cclxuICAgIHJldHVybiBjb2xvcjtcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVmVyaWZ5IGlmIHRoZSBjbGllbnQgYnJvd3NlciBoYXMgdHJhbnNpc3Rpb24gc3VwcG9ydFxyXG4gICAqL1xyXG4gIFJpcHBsZXMucHJvdG90eXBlLmhhc1RyYW5zaXRpb25TdXBwb3J0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdGhpc0JvZHkgID0gZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICB2YXIgdGhpc1N0eWxlID0gdGhpc0JvZHkuc3R5bGU7XHJcblxyXG4gICAgdmFyIHN1cHBvcnQgPSAoXHJcbiAgICAgIHRoaXNTdHlsZS50cmFuc2l0aW9uICE9PSB1bmRlZmluZWQgfHxcclxuICAgICAgdGhpc1N0eWxlLldlYmtpdFRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICB0aGlzU3R5bGUuTW96VHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgIHRoaXNTdHlsZS5Nc1RyYW5zaXRpb24gIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICB0aGlzU3R5bGUuT1RyYW5zaXRpb24gIT09IHVuZGVmaW5lZFxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gc3VwcG9ydDtcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVmVyaWZ5IGlmIHRoZSBjbGllbnQgaXMgdXNpbmcgYSBtb2JpbGUgZGV2aWNlXHJcbiAgICovXHJcbiAgUmlwcGxlcy5wcm90b3R5cGUuaXNUb3VjaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRW5kIHRoZSBhbmltYXRpb24gb2YgdGhlIHJpcHBsZVxyXG4gICAqL1xyXG4gIFJpcHBsZXMucHJvdG90eXBlLnJpcHBsZUVuZCA9IGZ1bmN0aW9uKCRyaXBwbGUpIHtcclxuICAgICRyaXBwbGUuZGF0YShcImFuaW1hdGluZ1wiLCBcIm9mZlwiKTtcclxuXHJcbiAgICBpZigkcmlwcGxlLmRhdGEoXCJtb3VzZWRvd25cIikgPT09IFwib2ZmXCIpIHtcclxuICAgICAgc2VsZi5yaXBwbGVPdXQoJHJpcHBsZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFR1cm4gb2ZmIHRoZSByaXBwbGUgZWZmZWN0XHJcbiAgICovXHJcbiAgUmlwcGxlcy5wcm90b3R5cGUucmlwcGxlT3V0ID0gZnVuY3Rpb24oJHJpcHBsZSkge1xyXG4gICAgJHJpcHBsZS5vZmYoKTtcclxuXHJcbiAgICBpZihzZWxmLmhhc1RyYW5zaXRpb25TdXBwb3J0KCkpIHtcclxuICAgICAgJHJpcHBsZS5hZGRDbGFzcyhcInJpcHBsZS1vdXRcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkcmlwcGxlLmFuaW1hdGUoe1wib3BhY2l0eVwiOiAwfSwgMTAwLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkcmlwcGxlLnRyaWdnZXIoXCJ0cmFuc2l0aW9uZW5kXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkcmlwcGxlLm9uKFwidHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgJHJpcHBsZS5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBUdXJuIG9uIHRoZSByaXBwbGUgZWZmZWN0XHJcbiAgICovXHJcbiAgUmlwcGxlcy5wcm90b3R5cGUucmlwcGxlT24gPSBmdW5jdGlvbigkZWxlbWVudCwgJHJpcHBsZSkge1xyXG4gICAgdmFyIHNpemUgPSBzZWxmLmdldE5ld1NpemUoJGVsZW1lbnQsICRyaXBwbGUpO1xyXG5cclxuICAgIGlmKHNlbGYuaGFzVHJhbnNpdGlvblN1cHBvcnQoKSkge1xyXG4gICAgICAkcmlwcGxlXHJcbiAgICAgIC5jc3Moe1xyXG4gICAgICAgIFwiLW1zLXRyYW5zZm9ybVwiOiBcInNjYWxlKFwiICsgc2l6ZSArIFwiKVwiLFxyXG4gICAgICAgIFwiLW1vei10cmFuc2Zvcm1cIjogXCJzY2FsZShcIiArIHNpemUgKyBcIilcIixcclxuICAgICAgICBcIi13ZWJraXQtdHJhbnNmb3JtXCI6IFwic2NhbGUoXCIgKyBzaXplICsgXCIpXCIsXHJcbiAgICAgICAgXCJ0cmFuc2Zvcm1cIjogXCJzY2FsZShcIiArIHNpemUgKyBcIilcIlxyXG4gICAgICB9KVxyXG4gICAgICAuYWRkQ2xhc3MoXCJyaXBwbGUtb25cIilcclxuICAgICAgLmRhdGEoXCJhbmltYXRpbmdcIiwgXCJvblwiKVxyXG4gICAgICAuZGF0YShcIm1vdXNlZG93blwiLCBcIm9uXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJHJpcHBsZS5hbmltYXRlKHtcclxuICAgICAgICBcIndpZHRoXCI6IE1hdGgubWF4KCRlbGVtZW50Lm91dGVyV2lkdGgoKSwgJGVsZW1lbnQub3V0ZXJIZWlnaHQoKSkgKiAyLFxyXG4gICAgICAgIFwiaGVpZ2h0XCI6IE1hdGgubWF4KCRlbGVtZW50Lm91dGVyV2lkdGgoKSwgJGVsZW1lbnQub3V0ZXJIZWlnaHQoKSkgKiAyLFxyXG4gICAgICAgIFwibWFyZ2luLWxlZnRcIjogTWF0aC5tYXgoJGVsZW1lbnQub3V0ZXJXaWR0aCgpLCAkZWxlbWVudC5vdXRlckhlaWdodCgpKSAqICgtMSksXHJcbiAgICAgICAgXCJtYXJnaW4tdG9wXCI6IE1hdGgubWF4KCRlbGVtZW50Lm91dGVyV2lkdGgoKSwgJGVsZW1lbnQub3V0ZXJIZWlnaHQoKSkgKiAoLTEpLFxyXG4gICAgICAgIFwib3BhY2l0eVwiOiAwLjJcclxuICAgICAgfSwgNTAwLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkcmlwcGxlLnRyaWdnZXIoXCJ0cmFuc2l0aW9uZW5kXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIHRoZSBqcXVlcnkgcGx1Z2luIGZ1bmN0aW9uXHJcbiAgICovXHJcbiAgJC5mbi5yaXBwbGVzID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgaWYoISQuZGF0YSh0aGlzLCBcInBsdWdpbl9cIiArIHJpcHBsZXMpKSB7XHJcbiAgICAgICAgJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcmlwcGxlcywgbmV3IFJpcHBsZXModGhpcywgb3B0aW9ucykpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxufSkoalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuIl19
