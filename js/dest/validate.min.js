(function(t,e,n){"use strict";var r=function(t,e,n){n=i.extend({},i.options,n);var o,s,a=i.runValidations(t,e,n);for(o in a)for(s in a[o])if(i.isPromise(a[o][s]))throw new Error("Use validate.async if you want support for promises");return r.processValidationResults(a,n)},i=r;i.extend=function(t){return[].slice.call(arguments,1).forEach(function(e){for(var n in e)t[n]=e[n]}),t},i.extend(r,{version:{major:0,minor:11,patch:1,metadata:null,toString:function(){var t=i.format("%{major}.%{minor}.%{patch}",i.version);return i.isEmpty(i.version.metadata)||(t+="+"+i.version.metadata),t}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,e,n){var r,o,s,a,u,f,l,c=[];(i.isDomElement(t)||i.isJqueryElement(t))&&(t=i.collectFormValues(t));for(r in e){s=i.getDeepObjectValue(t,r),a=i.result(e[r],s,t,r,n,e);for(o in a){if(u=i.validators[o],!u)throw l=i.format("Unknown validator %{name}",{name:o}),new Error(l);f=a[o],f=i.result(f,s,t,r,n,e),f&&c.push({attribute:r,value:s,validator:o,globalOptions:n,attributes:t,options:f,error:u.call(u,s,f,r,t,n)})}}return c},processValidationResults:function(t,e){t=i.pruneEmptyErrors(t,e),t=i.expandMultipleErrors(t,e),t=i.convertErrorMessages(t,e);var n=e.format||"grouped";if("function"!=typeof i.formatters[n])throw new Error(i.format("Unknown format %{format}",e));return t=i.formatters[n](t),i.isEmpty(t)?void 0:t},async:function(t,e,n){n=i.extend({},i.async.options,n);var r=n.wrapErrors||function(t){return t};n.cleanAttributes!==!1&&(t=i.cleanAttributes(t,e));var o=i.runValidations(t,e,n);return new i.Promise(function(s,a){i.waitForResults(o).then(function(){var u=i.processValidationResults(o,n);u?a(new r(u,n,t,e)):s(t)},function(t){a(t)})})},single:function(t,e,n){return n=i.extend({},i.single.options,n,{format:"flat",fullMessages:!1}),i({single:t},{single:e},n)},waitForResults:function(t){return t.reduce(function(t,e){return i.isPromise(e.error)?t.then(function(){return e.error.then(function(t){e.error=t||null})}):t},new i.Promise(function(t){t()}))},result:function(t){var e=[].slice.call(arguments,1);return"function"==typeof t&&(t=t.apply(null,e)),t},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},isFunction:function(t){return"function"==typeof t},isInteger:function(t){return i.isNumber(t)&&t%1===0},isBoolean:function(t){return"boolean"==typeof t},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return null!==t&&void 0!==t},isPromise:function(t){return!!t&&i.isFunction(t.then)},isJqueryElement:function(t){return t&&i.isString(t.jquery)},isDomElement:function(t){return!!t&&(!(!t.querySelectorAll||!t.querySelector)&&(!(!i.isObject(document)||t!==document)||("object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)))},isEmpty:function(t){var e;if(!i.isDefined(t))return!0;if(i.isFunction(t))return!1;if(i.isString(t))return i.EMPTY_STRING_REGEXP.test(t);if(i.isArray(t))return 0===t.length;if(i.isDate(t))return!1;if(i.isObject(t)){for(e in t)return!1;return!0}return!1},format:i.extend(function(t,e){return i.isString(t)?t.replace(i.format.FORMAT_REGEXP,function(t,n,r){return"%"===n?"%{"+r+"}":String(e[r])}):t},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return i.isNumber(t)?100*t%1===0?""+t:parseFloat(Math.round(100*t)/100).toFixed(2):i.isArray(t)?t.map(function(t){return i.prettify(t)}).join(", "):i.isObject(t)?t.toString():(t=""+t,t.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(t,e,n){return""+e+" "+n.toLowerCase()}).toLowerCase())},stringifyValue:function(t){return i.prettify(t)},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"==={}.toString.call(t)},isHash:function(t){return i.isObject(t)&&!i.isArray(t)&&!i.isFunction(t)},contains:function(t,e){return!!i.isDefined(t)&&(i.isArray(t)?t.indexOf(e)!==-1:e in t)},unique:function(t){return i.isArray(t)?t.filter(function(t,e,n){return n.indexOf(t)==e}):t},forEachKeyInKeypath:function(t,e,n){if(i.isString(e)){var r,o="",s=!1;for(r=0;r<e.length;++r)switch(e[r]){case".":s?(s=!1,o+="."):(t=n(t,o,!1),o="");break;case"\\":s?(s=!1,o+="\\"):s=!0;break;default:s=!1,o+=e[r]}return n(t,o,!0)}},getDeepObjectValue:function(t,e){if(i.isObject(t))return i.forEachKeyInKeypath(t,e,function(t,e){if(i.isObject(t))return t[e]})},collectFormValues:function(t,e){var n,r,o,s,a,u,f={};if(i.isJqueryElement(t)&&(t=t[0]),!t)return f;for(e=e||{},s=t.querySelectorAll("input[name], textarea[name]"),n=0;n<s.length;++n)o=s.item(n),i.isDefined(o.getAttribute("data-ignored"))||(u=i.sanitizeFormValue(o.value,e),"number"===o.type?u=u?+u:null:"checkbox"===o.type?o.attributes.value?o.checked||(u=f[o.name]||null):u=o.checked:"radio"===o.type&&(o.checked||(u=f[o.name]||null)),f[o.name]=u);for(s=t.querySelectorAll("select[name]"),n=0;n<s.length;++n){if(o=s.item(n),o.multiple){u=[];for(r in o.options)a=o.options[r],a.selected&&u.push(i.sanitizeFormValue(a.value,e))}else u=i.sanitizeFormValue(o.options[o.selectedIndex].value,e);f[o.name]=u}return f},sanitizeFormValue:function(t,e){return e.trim&&i.isString(t)&&(t=t.trim()),e.nullify!==!1&&""===t?null:t},capitalize:function(t){return i.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter(function(t){return!i.isEmpty(t.error)})},expandMultipleErrors:function(t){var e=[];return t.forEach(function(t){i.isArray(t.error)?t.error.forEach(function(n){e.push(i.extend({},t,{error:n}))}):e.push(t)}),e},convertErrorMessages:function(t,e){e=e||{};var n=[];return t.forEach(function(t){var r=i.result(t.error,t.value,t.attribute,t.options,t.attributes,t.globalOptions);return i.isString(r)?("^"===r[0]?r=r.slice(1):e.fullMessages!==!1&&(r=i.capitalize(i.prettify(t.attribute))+" "+r),r=r.replace(/\\\^/g,"^"),r=i.format(r,{value:i.stringifyValue(t.value)}),void n.push(i.extend({},t,{error:r}))):void n.push(t)}),n},groupErrorsByAttribute:function(t){var e={};return t.forEach(function(t){var n=e[t.attribute];n?n.push(t):e[t.attribute]=[t]}),e},flattenErrorsToArray:function(t){return t.map(function(t){return t.error}).filter(function(t,e,n){return n.indexOf(t)===e})},cleanAttributes:function(t,e){function n(t,e,n){return i.isObject(t[e])?t[e]:t[e]=!!n||{}}function r(t){var e,r={};for(e in t)t[e]&&i.forEachKeyInKeypath(r,e,n);return r}function o(t,e){if(!i.isObject(t))return t;var n,r,s=i.extend({},t);for(r in t)n=e[r],i.isObject(n)?s[r]=o(s[r],n):n||delete s[r];return s}return i.isObject(e)&&i.isObject(t)?(e=r(e),o(t,e)):{}},exposeModule:function(t,e,n,r,i){n?(r&&r.exports&&(n=r.exports=t),n.validate=t):(e.validate=t,t.isFunction(i)&&i.amd&&i([],function(){return t}))},warn:function(t){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+t)}}),r.validators={presence:function(t,e){if(e=i.extend({},this.options,e),e.allowEmpty?!i.isDefined(t):i.isEmpty(t))return e.message||this.message||"can't be blank"},length:function(t,e,n){if(i.isDefined(t)){e=i.extend({},this.options,e);var r,o=e.is,s=e.maximum,a=e.minimum,u=e.tokenizer||function(t){return t},f=[];t=u(t);var l=t.length;return i.isNumber(l)?(i.isNumber(o)&&l!==o&&(r=e.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",f.push(i.format(r,{count:o}))),i.isNumber(a)&&l<a&&(r=e.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",f.push(i.format(r,{count:a}))),i.isNumber(s)&&l>s&&(r=e.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",f.push(i.format(r,{count:s}))),f.length>0?e.message||f:void 0):(i.error(i.format("Attribute %{attr} has a non numeric value for `length`",{attr:n})),e.message||this.notValid||"has an incorrect length")}},numericality:function(t,e){if(i.isDefined(t)){e=i.extend({},this.options,e);var n,r,o=[],s={greaterThan:function(t,e){return t>e},greaterThanOrEqualTo:function(t,e){return t>=e},equalTo:function(t,e){return t===e},lessThan:function(t,e){return t<e},lessThanOrEqualTo:function(t,e){return t<=e},divisibleBy:function(t,e){return t%e===0}};if(i.isString(t)&&e.strict){var a="^(0|[1-9]\\d*)";if(e.onlyInteger||(a+="(\\.\\d+)?"),a+="$",!new RegExp(a).test(t))return e.message||e.notValid||this.notValid||this.message||"must be a valid number"}if(e.noStrings!==!0&&i.isString(t)&&!i.isEmpty(t)&&(t=+t),!i.isNumber(t))return e.message||e.notValid||this.notValid||this.message||"is not a number";if(e.onlyInteger&&!i.isInteger(t))return e.message||e.notInteger||this.notInteger||this.message||"must be an integer";for(n in s)if(r=e[n],i.isNumber(r)&&!s[n](t,r)){var u="not"+i.capitalize(n),f=e[u]||this[u]||this.message||"must be %{type} %{count}";o.push(i.format(f,{count:r,type:i.prettify(n)}))}return e.odd&&t%2!==1&&o.push(e.notOdd||this.notOdd||this.message||"must be odd"),e.even&&t%2!==0&&o.push(e.notEven||this.notEven||this.message||"must be even"),o.length?e.message||o:void 0}},datetime:i.extend(function(t,e){if(!i.isFunction(this.parse)||!i.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(i.isDefined(t)){e=i.extend({},this.options,e);var n,r=[],o=e.earliest?this.parse(e.earliest,e):NaN,s=e.latest?this.parse(e.latest,e):NaN;return t=this.parse(t,e),isNaN(t)||e.dateOnly&&t%864e5!==0?(n=e.notValid||e.message||this.notValid||"must be a valid date",i.format(n,{value:arguments[0]})):(!isNaN(o)&&t<o&&(n=e.tooEarly||e.message||this.tooEarly||"must be no earlier than %{date}",n=i.format(n,{value:this.format(t,e),date:this.format(o,e)}),r.push(n)),!isNaN(s)&&t>s&&(n=e.tooLate||e.message||this.tooLate||"must be no later than %{date}",n=i.format(n,{date:this.format(s,e),value:this.format(t,e)}),r.push(n)),r.length?i.unique(r):void 0)}},{parse:null,format:null}),date:function(t,e){return e=i.extend({},e,{dateOnly:!0}),i.validators.datetime.call(i.validators.datetime,t,e)},format:function(t,e){(i.isString(e)||e instanceof RegExp)&&(e={pattern:e}),e=i.extend({},this.options,e);var n,r=e.message||this.message||"is invalid",o=e.pattern;if(i.isDefined(t))return i.isString(t)?(i.isString(o)&&(o=new RegExp(e.pattern,e.flags)),n=o.exec(t),n&&n[0].length==t.length?void 0:r):r},inclusion:function(t,e){if(i.isDefined(t)&&(i.isArray(e)&&(e={within:e}),e=i.extend({},this.options,e),!i.contains(e.within,t))){var n=e.message||this.message||"^%{value} is not included in the list";return i.format(n,{value:t})}},exclusion:function(t,e){if(i.isDefined(t)&&(i.isArray(e)&&(e={within:e}),e=i.extend({},this.options,e),i.contains(e.within,t))){var n=e.message||this.message||"^%{value} is restricted";return i.format(n,{value:t})}},email:i.extend(function(t,e){e=i.extend({},this.options,e);var n=e.message||this.message||"is not a valid email";if(i.isDefined(t))return i.isString(t)&&this.PATTERN.exec(t)?void 0:n},{PATTERN:/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i}),equality:function(t,e,n,r){if(i.isDefined(t)){i.isString(e)&&(e={attribute:e}),e=i.extend({},this.options,e);var o=e.message||this.message||"is not equal to %{attribute}";if(i.isEmpty(e.attribute)||!i.isString(e.attribute))throw new Error("The attribute must be a non empty string");var s=i.getDeepObjectValue(r,e.attribute),a=e.comparator||function(t,e){return t===e};return a(t,s,e,n,r)?void 0:i.format(o,{attribute:i.prettify(e.attribute)})}},url:function(t,e){if(i.isDefined(t)){e=i.extend({},this.options,e);var n=e.message||this.message||"is not a valid url",r=e.schemes||this.schemes||["http","https"],o=e.allowLocal||this.allowLocal||!1;if(!i.isString(t))return n;var s="^(?:(?:"+r.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",a="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";o?a+="?":s+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",s+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+a+")(?::\\d{2,5})?(?:[/?#]\\S*)?$";var u=new RegExp(s,"i");return u.exec(t)?void 0:n}}},r.formatters={detailed:function(t){return t},flat:i.flattenErrorsToArray,grouped:function(t){var e;t=i.groupErrorsByAttribute(t);for(e in t)t[e]=i.flattenErrorsToArray(t[e]);return t},constraint:function(t){var e;t=i.groupErrorsByAttribute(t);for(e in t)t[e]=t[e].map(function(t){return t.validator}).sort();return t}},r.exposeModule(r,this,t,e,n)}).call(this,"undefined"!=typeof exports?exports:null,"undefined"!=typeof module?module:null,"undefined"!=typeof define?define:null);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRlLmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJ2YWxpZGF0ZSIsImF0dHJpYnV0ZXMiLCJjb25zdHJhaW50cyIsIm9wdGlvbnMiLCJ2IiwiZXh0ZW5kIiwiYXR0ciIsInZhbGlkYXRvciIsInJlc3VsdHMiLCJydW5WYWxpZGF0aW9ucyIsImlzUHJvbWlzZSIsIkVycm9yIiwicHJvY2Vzc1ZhbGlkYXRpb25SZXN1bHRzIiwib2JqIiwic2xpY2UiLCJjYWxsIiwiYXJndW1lbnRzIiwiZm9yRWFjaCIsInNvdXJjZSIsInZlcnNpb24iLCJtYWpvciIsIm1pbm9yIiwicGF0Y2giLCJtZXRhZGF0YSIsInRvU3RyaW5nIiwiZm9ybWF0IiwiaXNFbXB0eSIsIlByb21pc2UiLCJFTVBUWV9TVFJJTkdfUkVHRVhQIiwidmFsaWRhdG9yTmFtZSIsInZhbHVlIiwidmFsaWRhdG9ycyIsInZhbGlkYXRvck9wdGlvbnMiLCJlcnJvciIsImlzRG9tRWxlbWVudCIsImlzSnF1ZXJ5RWxlbWVudCIsImNvbGxlY3RGb3JtVmFsdWVzIiwiZ2V0RGVlcE9iamVjdFZhbHVlIiwicmVzdWx0IiwibmFtZSIsInB1c2giLCJhdHRyaWJ1dGUiLCJnbG9iYWxPcHRpb25zIiwiZXJyb3JzIiwicHJ1bmVFbXB0eUVycm9ycyIsImV4cGFuZE11bHRpcGxlRXJyb3JzIiwiY29udmVydEVycm9yTWVzc2FnZXMiLCJmb3JtYXR0ZXJzIiwidW5kZWZpbmVkIiwiYXN5bmMiLCJXcmFwRXJyb3JzIiwid3JhcEVycm9ycyIsImNsZWFuQXR0cmlidXRlcyIsInJlc29sdmUiLCJyZWplY3QiLCJ3YWl0Rm9yUmVzdWx0cyIsInRoZW4iLCJlcnIiLCJzaW5nbGUiLCJmdWxsTWVzc2FnZXMiLCJyZWR1Y2UiLCJtZW1vIiwiciIsImFyZ3MiLCJhcHBseSIsImlzTnVtYmVyIiwiaXNOYU4iLCJpc0Z1bmN0aW9uIiwiaXNJbnRlZ2VyIiwiaXNCb29sZWFuIiwiaXNPYmplY3QiLCJPYmplY3QiLCJpc0RhdGUiLCJEYXRlIiwiaXNEZWZpbmVkIiwicCIsIm8iLCJpc1N0cmluZyIsImpxdWVyeSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeVNlbGVjdG9yIiwiZG9jdW1lbnQiLCJIVE1MRWxlbWVudCIsIm5vZGVUeXBlIiwibm9kZU5hbWUiLCJ0ZXN0IiwiaXNBcnJheSIsImxlbmd0aCIsInN0ciIsInZhbHMiLCJyZXBsYWNlIiwiRk9STUFUX1JFR0VYUCIsIm0wIiwibTEiLCJtMiIsIlN0cmluZyIsInByZXR0aWZ5IiwicGFyc2VGbG9hdCIsIk1hdGgiLCJyb3VuZCIsInRvRml4ZWQiLCJtYXAiLCJzIiwiam9pbiIsInRvTG93ZXJDYXNlIiwic3RyaW5naWZ5VmFsdWUiLCJpc0hhc2giLCJjb250YWlucyIsImluZGV4T2YiLCJ1bmlxdWUiLCJhcnJheSIsImZpbHRlciIsImVsIiwiaW5kZXgiLCJmb3JFYWNoS2V5SW5LZXlwYXRoIiwib2JqZWN0Iiwia2V5cGF0aCIsImNhbGxiYWNrIiwiaSIsImtleSIsImVzY2FwZSIsImZvcm0iLCJqIiwiaW5wdXQiLCJpbnB1dHMiLCJvcHRpb24iLCJ2YWx1ZXMiLCJpdGVtIiwiZ2V0QXR0cmlidXRlIiwic2FuaXRpemVGb3JtVmFsdWUiLCJ0eXBlIiwiY2hlY2tlZCIsIm11bHRpcGxlIiwic2VsZWN0ZWQiLCJzZWxlY3RlZEluZGV4IiwidHJpbSIsIm51bGxpZnkiLCJjYXBpdGFsaXplIiwidG9VcHBlckNhc2UiLCJyZXQiLCJtc2ciLCJlcnJvckluZm8iLCJncm91cEVycm9yc0J5QXR0cmlidXRlIiwibGlzdCIsImZsYXR0ZW5FcnJvcnNUb0FycmF5Iiwic2VsZiIsIndoaXRlbGlzdCIsIndoaXRlbGlzdENyZWF0b3IiLCJsYXN0IiwiYnVpbGRPYmplY3RXaGl0ZWxpc3QiLCJvdyIsImNsZWFuUmVjdXJzaXZlIiwidyIsImV4cG9zZU1vZHVsZSIsInJvb3QiLCJhbWQiLCJ3YXJuIiwiY29uc29sZSIsInByZXNlbmNlIiwidGhpcyIsImFsbG93RW1wdHkiLCJtZXNzYWdlIiwiaXMiLCJtYXhpbXVtIiwibWluaW11bSIsInRva2VuaXplciIsInZhbCIsIndyb25nTGVuZ3RoIiwiY291bnQiLCJ0b29TaG9ydCIsInRvb0xvbmciLCJub3RWYWxpZCIsIm51bWVyaWNhbGl0eSIsImNoZWNrcyIsImdyZWF0ZXJUaGFuIiwiYyIsImdyZWF0ZXJUaGFuT3JFcXVhbFRvIiwiZXF1YWxUbyIsImxlc3NUaGFuIiwibGVzc1RoYW5PckVxdWFsVG8iLCJkaXZpc2libGVCeSIsInN0cmljdCIsInBhdHRlcm4iLCJvbmx5SW50ZWdlciIsIlJlZ0V4cCIsIm5vU3RyaW5ncyIsIm5vdEludGVnZXIiLCJvZGQiLCJub3RPZGQiLCJldmVuIiwibm90RXZlbiIsImRhdGV0aW1lIiwicGFyc2UiLCJlYXJsaWVzdCIsIk5hTiIsImxhdGVzdCIsImRhdGVPbmx5IiwidG9vRWFybHkiLCJkYXRlIiwidG9vTGF0ZSIsIm1hdGNoIiwiZmxhZ3MiLCJleGVjIiwiaW5jbHVzaW9uIiwid2l0aGluIiwiZXhjbHVzaW9uIiwiZW1haWwiLCJQQVRURVJOIiwiZXF1YWxpdHkiLCJvdGhlclZhbHVlIiwiY29tcGFyYXRvciIsInYxIiwidjIiLCJ1cmwiLCJzY2hlbWVzIiwiYWxsb3dMb2NhbCIsInJlZ2V4IiwidGxkIiwiZGV0YWlsZWQiLCJmbGF0IiwiZ3JvdXBlZCIsImNvbnN0cmFpbnQiLCJzb3J0Il0sIm1hcHBpbmdzIjoiQ0FTQSxTQUFVQSxFQUFTQyxFQUFRQyxHQUN6QixZQVdBLElBQUlDLEdBQVcsU0FBU0MsRUFBWUMsRUFBYUMsR0FDL0NBLEVBQVVDLEVBQUVDLFVBQVdELEVBQUVELFFBQVNBLEVBRWxDLElBQ0lHLEdBQ0FDLEVBRkFDLEVBQVVKLEVBQUVLLGVBQWVSLEVBQVlDLEVBQWFDLEVBSXhELEtBQUtHLElBQVFFLEdBQ1gsSUFBS0QsSUFBYUMsR0FBUUYsR0FDeEIsR0FBSUYsRUFBRU0sVUFBVUYsRUFBUUYsR0FBTUMsSUFDNUIsS0FBTSxJQUFJSSxPQUFN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QU8sSUFDaEMsT0FBS1QsR0FBUUwsS0FBSzVLLEdBQWxCLE9BQ1NtSSxLQUtiakssRUFBUytDLFlBQ1AySyxTQUFVLFNBQVMvSyxHQUFTLE1BQU9BLElBQ25DZ0wsS0FBTXZOLEVBQUU0SSxxQkFDUjRFLFFBQVMsU0FBU2pMLEdBQ2hCLEdBQUlyQyxFQUVKcUMsR0FBU3ZDLEVBQUUwSSx1QkFBdUJuRyxFQUNsQyxLQUFLckMsSUFBUXFDLEdBQ1hBLEVBQU9yQyxHQUFRRixFQUFFNEkscUJBQXFCckcsRUFBT3JDLEdBRS9DLE9BQU9xQyxJQUVUa0wsV0FBWSxTQUFTbEwsR0FDbkIsR0FBSXJDLEVBQ0pxQyxHQUFTdkMsRUFBRTBJLHVCQUF1Qm5HLEVBQ2xDLEtBQUtyQyxJQUFRcUMsR0FDWEEsRUFBT3JDLEdBQVFxQyxFQUFPckMsR0FBTStGLElBQUksU0FBUy9ELEdBQ3ZDLE1BQU9BLEdBQU8vQixZQUNidU4sTUFFTCxPQUFPbkwsS0FJWDNDLEVBQVN5SixhQUFhekosRUFBVStKLEtBQU1sSyxFQUFTQyxFQUFRQyxLQUN0RGdCLEtBQUtnSixLQUNtQixtQkFBWmxLLFNBQXFEQSxRQUFVLEtBQ3BELG1CQUFYQyxRQUFvREEsT0FBUyxLQUNsRCxtQkFBWEMsUUFBb0RBLE9BQVMiLCJmaWxlIjoidmFsaWRhdGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiB2YWxpZGF0ZS5qcyAwLjExLjFcbiAqXG4gKiAoYykgMjAxMy0yMDE2IE5pY2tsYXMgQW5zbWFuLCAyMDEzIFdyYXBwXG4gKiBWYWxpZGF0ZS5qcyBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjpcbiAqIGh0dHA6Ly92YWxpZGF0ZWpzLm9yZy9cbiAqL1xuXG4oZnVuY3Rpb24oZXhwb3J0cywgbW9kdWxlLCBkZWZpbmUpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gVGhlIG1haW4gZnVuY3Rpb24gdGhhdCBjYWxscyB0aGUgdmFsaWRhdG9ycyBzcGVjaWZpZWQgYnkgdGhlIGNvbnN0cmFpbnRzLlxuICAvLyBUaGUgb3B0aW9ucyBhcmUgdGhlIGZvbGxvd2luZzpcbiAgLy8gICAtIGZvcm1hdCAoc3RyaW5nKSAtIEFuIG9wdGlvbiB0aGF0IGNvbnRyb2xzIGhvdyB0aGUgcmV0dXJuZWQgdmFsdWUgaXMgZm9ybWF0dGVkXG4gIC8vICAgICAqIGZsYXQgLSBSZXR1cm5zIGEgZmxhdCBhcnJheSBvZiBqdXN0IHRoZSBlcnJvciBtZXNzYWdlc1xuICAvLyAgICAgKiBncm91cGVkIC0gUmV0dXJucyB0aGUgbWVzc2FnZXMgZ3JvdXBlZCBieSBhdHRyaWJ1dGUgKGRlZmF1bHQpXG4gIC8vICAgICAqIGRldGFpbGVkIC0gUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgcmF3IHZhbGlkYXRpb24gZGF0YVxuICAvLyAgIC0gZnVsbE1lc3NhZ2VzIChib29sZWFuKSAtIElmIGB0cnVlYCAoZGVmYXVsdCkgdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIHByZXBlbmRlZCB0byB0aGUgZXJyb3IuXG4gIC8vXG4gIC8vIFBsZWFzZSBub3RlIHRoYXQgdGhlIG9wdGlvbnMgYXJlIGFsc28gcGFzc2VkIHRvIGVhY2ggdmFsaWRhdG9yLlxuICB2YXIgdmFsaWRhdGUgPSBmdW5jdGlvbihhdHRyaWJ1dGVzLCBjb25zdHJhaW50cywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdi5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgIHZhciByZXN1bHRzID0gdi5ydW5WYWxpZGF0aW9ucyhhdHRyaWJ1dGVzLCBjb25zdHJhaW50cywgb3B0aW9ucylcbiAgICAgICwgYXR0clxuICAgICAgLCB2YWxpZGF0b3I7XG5cbiAgICBmb3IgKGF0dHIgaW4gcmVzdWx0cykge1xuICAgICAgZm9yICh2YWxpZGF0b3IgaW4gcmVzdWx0c1thdHRyXSkge1xuICAgICAgICBpZiAodi5pc1Byb21pc2UocmVzdWx0c1thdHRyXVt2YWxpZGF0b3JdKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZSB2YWxpZGF0ZS5hc3luYyBpZiB5b3Ugd2FudCBzdXBwb3J0IGZvciBwcm9taXNlc1wiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsaWRhdGUucHJvY2Vzc1ZhbGlkYXRpb25SZXN1bHRzKHJlc3VsdHMsIG9wdGlvbnMpO1xuICB9O1xuXG4gIHZhciB2ID0gdmFsaWRhdGU7XG5cbiAgLy8gQ29waWVzIG92ZXIgYXR0cmlidXRlcyBmcm9tIG9uZSBvciBtb3JlIHNvdXJjZXMgdG8gYSBzaW5nbGUgZGVzdGluYXRpb24uXG4gIC8vIFZlcnkgbXVjaCBzaW1pbGFyIHRvIHVuZGVyc2NvcmUncyBleHRlbmQuXG4gIC8vIFRoZSBmaXJzdCBhcmd1bWVudCBpcyB0aGUgdGFyZ2V0IG9iamVjdCBhbmQgdGhlIHJlbWFpbmluZyBhcmd1bWVudHMgd2lsbCBiZVxuICAvLyB1c2VkIGFzIHNvdXJjZXMuXG4gIHYuZXh0ZW5kID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLmZvckVhY2goZnVuY3Rpb24oc291cmNlKSB7XG4gICAgICBmb3IgKHZhciBhdHRyIGluIHNvdXJjZSkge1xuICAgICAgICBvYmpbYXR0cl0gPSBzb3VyY2VbYXR0cl07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICB2LmV4dGVuZCh2YWxpZGF0ZSwge1xuICAgIC8vIFRoaXMgaXMgdGhlIHZlcnNpb24gb2YgdGhlIGxpYnJhcnkgYXMgYSBzZW12ZXIuXG4gICAgLy8gVGhlIHRvU3RyaW5nIGZ1bmN0aW9uIHdpbGwgYWxsb3cgaXQgdG8gYmUgY29lcmNlZCBpbnRvIGEgc3RyaW5nXG4gICAgdmVyc2lvbjoge1xuICAgICAgbWFqb3I6IDAsXG4gICAgICBtaW5vcjogMTEsXG4gICAgICBwYXRjaDogMSxcbiAgICAgIG1ldGFkYXRhOiBudWxsLFxuICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmVyc2lvbiA9IHYuZm9ybWF0KFwiJXttYWpvcn0uJXttaW5vcn0uJXtwYXRjaH1cIiwgdi52ZXJzaW9uKTtcbiAgICAgICAgaWYgKCF2LmlzRW1wdHkodi52ZXJzaW9uLm1ldGFkYXRhKSkge1xuICAgICAgICAgIHZlcnNpb24gKz0gXCIrXCIgKyB2LnZlcnNpb24ubWV0YWRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZlcnNpb247XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIEJlbG93IGlzIHRoZSBkZXBlbmRlbmNpZXMgdGhhdCBhcmUgdXNlZCBpbiB2YWxpZGF0ZS5qc1xuXG4gICAgLy8gVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBQcm9taXNlIGltcGxlbWVudGF0aW9uLlxuICAgIC8vIElmIHlvdSBhcmUgdXNpbmcgUS5qcywgUlNWUCBvciBhbnkgb3RoZXIgQSsgY29tcGF0aWJsZSBpbXBsZW1lbnRhdGlvblxuICAgIC8vIG92ZXJyaWRlIHRoaXMgYXR0cmlidXRlIHRvIGJlIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGF0IHByb21pc2UuXG4gICAgLy8gU2luY2UgalF1ZXJ5IHByb21pc2VzIGFyZW4ndCBBKyBjb21wYXRpYmxlIHRoZXkgd29uJ3Qgd29yay5cbiAgICBQcm9taXNlOiB0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiA/IFByb21pc2UgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBudWxsLFxuXG4gICAgRU1QVFlfU1RSSU5HX1JFR0VYUDogL15cXHMqJC8sXG5cbiAgICAvLyBSdW5zIHRoZSB2YWxpZGF0b3JzIHNwZWNpZmllZCBieSB0aGUgY29uc3RyYWludHMgb2JqZWN0LlxuICAgIC8vIFdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIHRoZSBmb3JtYXQ6XG4gICAgLy8gICAgIFt7YXR0cmlidXRlOiBcIjxhdHRyaWJ1dGUgbmFtZT5cIiwgZXJyb3I6IFwiPHZhbGlkYXRpb24gcmVzdWx0PlwifSwgLi4uXVxuICAgIHJ1blZhbGlkYXRpb25zOiBmdW5jdGlvbihhdHRyaWJ1dGVzLCBjb25zdHJhaW50cywgb3B0aW9ucykge1xuICAgICAgdmFyIHJlc3VsdHMgPSBbXVxuICAgICAgICAsIGF0dHJcbiAgICAgICAgLCB2YWxpZGF0b3JOYW1lXG4gICAgICAgICwgdmFsdWVcbiAgICAgICAgLCB2YWxpZGF0b3JzXG4gICAgICAgICwgdmFsaWRhdG9yXG4gICAgICAgICwgdmFsaWRhdG9yT3B0aW9uc1xuICAgICAgICAsIGVycm9yO1xuXG4gICAgICBpZiAodi5pc0RvbUVsZW1lbnQoYXR0cmlidXRlcykgfHwgdi5pc0pxdWVyeUVsZW1lbnQoYXR0cmlidXRlcykpIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IHYuY29sbGVjdEZvcm1WYWx1ZXMoYXR0cmlidXRlcyk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvb3BzIHRocm91Z2ggZWFjaCBjb25zdHJhaW50cywgZmluZHMgdGhlIGNvcnJlY3QgdmFsaWRhdG9yIGFuZCBydW4gaXQuXG4gICAgICBmb3IgKGF0dHIgaW4gY29uc3RyYWludHMpIHtcbiAgICAgICAgdmFsdWUgPSB2LmdldERlZXBPYmplY3RWYWx1ZShhdHRyaWJ1dGVzLCBhdHRyKTtcbiAgICAgICAgLy8gVGhpcyBhbGxvd3MgdGhlIGNvbnN0cmFpbnRzIGZvciBhbiBhdHRyaWJ1dGUgdG8gYmUgYSBmdW5jdGlvbi5cbiAgICAgICAgLy8gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIHZhbHVlLCBhdHRyaWJ1dGUgbmFtZSwgdGhlIGNvbXBsZXRlIGRpY3Qgb2ZcbiAgICAgICAgLy8gYXR0cmlidXRlcyBhcyB3ZWxsIGFzIHRoZSBvcHRpb25zIGFuZCBjb25zdHJhaW50cyBwYXNzZWQgaW4uXG4gICAgICAgIC8vIFRoaXMgaXMgdXNlZnVsIHdoZW4geW91IHdhbnQgdG8gaGF2ZSBkaWZmZXJlbnRcbiAgICAgICAgLy8gdmFsaWRhdGlvbnMgZGVwZW5kaW5nIG9uIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXG4gICAgICAgIHZhbGlkYXRvcnMgPSB2LnJlc3VsdChjb25zdHJhaW50c1thdHRyXSwgdmFsdWUsIGF0dHJpYnV0ZXMsIGF0dHIsIG9wdGlvbnMsIGNvbnN0cmFpbnRzKTtcblxuICAgICAgICBmb3IgKHZhbGlkYXRvck5hbWUgaW4gdmFsaWRhdG9ycykge1xuICAgICAgICAgIHZhbGlkYXRvciA9IHYudmFsaWRhdG9yc1t2YWxpZGF0b3JOYW1lXTtcblxuICAgICAgICAgIGlmICghdmFsaWRhdG9yKSB7XG4gICAgICAgICAgICBlcnJvciA9IHYuZm9ybWF0KFwiVW5rbm93biB2YWxpZGF0b3IgJXtuYW1lfVwiLCB7bmFtZTogdmFsaWRhdG9yTmFtZX0pO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YWxpZGF0b3JPcHRpb25zID0gdmFsaWRhdG9yc1t2YWxpZGF0b3JOYW1lXTtcbiAgICAgICAgICAvLyBUaGlzIGFsbG93cyB0aGUgb3B0aW9ucyB0byBiZSBhIGZ1bmN0aW9uLiBUaGUgZnVuY3Rpb24gd2lsbCBiZVxuICAgICAgICAgIC8vIGNhbGxlZCB3aXRoIHRoZSB2YWx1ZSwgYXR0cmlidXRlIG5hbWUsIHRoZSBjb21wbGV0ZSBkaWN0IG9mXG4gICAgICAgICAgLy8gYXR0cmlidXRlcyBhcyB3ZWxsIGFzIHRoZSBvcHRpb25zIGFuZCBjb25zdHJhaW50cyBwYXNzZWQgaW4uXG4gICAgICAgICAgLy8gVGhpcyBpcyB1c2VmdWwgd2hlbiB5b3Ugd2FudCB0byBoYXZlIGRpZmZlcmVudFxuICAgICAgICAgIC8vIHZhbGlkYXRpb25zIGRlcGVuZGluZyBvbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgICAgICAgIHZhbGlkYXRvck9wdGlvbnMgPSB2LnJlc3VsdCh2YWxpZGF0b3JPcHRpb25zLCB2YWx1ZSwgYXR0cmlidXRlcywgYXR0ciwgb3B0aW9ucywgY29uc3RyYWludHMpO1xuICAgICAgICAgIGlmICghdmFsaWRhdG9yT3B0aW9ucykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICBhdHRyaWJ1dGU6IGF0dHIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRvck5hbWUsXG4gICAgICAgICAgICBnbG9iYWxPcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcyxcbiAgICAgICAgICAgIG9wdGlvbnM6IHZhbGlkYXRvck9wdGlvbnMsXG4gICAgICAgICAgICBlcnJvcjogdmFsaWRhdG9yLmNhbGwodmFsaWRhdG9yLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRvck9wdGlvbnMsXG4gICAgICAgICAgICAgICAgYXR0cixcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSxcblxuICAgIC8vIFRha2VzIHRoZSBvdXRwdXQgZnJvbSBydW5WYWxpZGF0aW9ucyBhbmQgY29udmVydHMgaXQgdG8gdGhlIGNvcnJlY3RcbiAgICAvLyBvdXRwdXQgZm9ybWF0LlxuICAgIHByb2Nlc3NWYWxpZGF0aW9uUmVzdWx0czogZnVuY3Rpb24oZXJyb3JzLCBvcHRpb25zKSB7XG4gICAgICBlcnJvcnMgPSB2LnBydW5lRW1wdHlFcnJvcnMoZXJyb3JzLCBvcHRpb25zKTtcbiAgICAgIGVycm9ycyA9IHYuZXhwYW5kTXVsdGlwbGVFcnJvcnMoZXJyb3JzLCBvcHRpb25zKTtcbiAgICAgIGVycm9ycyA9IHYuY29udmVydEVycm9yTWVzc2FnZXMoZXJyb3JzLCBvcHRpb25zKTtcblxuICAgICAgdmFyIGZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0IHx8IFwiZ3JvdXBlZFwiO1xuXG4gICAgICBpZiAodHlwZW9mIHYuZm9ybWF0dGVyc1tmb3JtYXRdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGVycm9ycyA9IHYuZm9ybWF0dGVyc1tmb3JtYXRdKGVycm9ycyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3Iodi5mb3JtYXQoXCJVbmtub3duIGZvcm1hdCAle2Zvcm1hdH1cIiwgb3B0aW9ucykpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdi5pc0VtcHR5KGVycm9ycykgPyB1bmRlZmluZWQgOiBlcnJvcnM7XG4gICAgfSxcblxuICAgIC8vIFJ1bnMgdGhlIHZhbGlkYXRpb25zIHdpdGggc3VwcG9ydCBmb3IgcHJvbWlzZXMuXG4gICAgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiBhIHByb21pc2UgdGhhdCBpcyBzZXR0bGVkIHdoZW4gYWxsIHRoZVxuICAgIC8vIHZhbGlkYXRpb24gcHJvbWlzZXMgaGF2ZSBiZWVuIGNvbXBsZXRlZC5cbiAgICAvLyBJdCBjYW4gYmUgY2FsbGVkIGV2ZW4gaWYgbm8gdmFsaWRhdGlvbnMgcmV0dXJuZWQgYSBwcm9taXNlLlxuICAgIGFzeW5jOiBmdW5jdGlvbihhdHRyaWJ1dGVzLCBjb25zdHJhaW50cywgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB2LmFzeW5jLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgV3JhcEVycm9ycyA9IG9wdGlvbnMud3JhcEVycm9ycyB8fCBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICAgIH07XG5cbiAgICAgIC8vIFJlbW92ZXMgdW5rbm93biBhdHRyaWJ1dGVzXG4gICAgICBpZiAob3B0aW9ucy5jbGVhbkF0dHJpYnV0ZXMgIT09IGZhbHNlKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSB2LmNsZWFuQXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBjb25zdHJhaW50cyk7XG4gICAgICB9XG5cbiAgICAgIHZhciByZXN1bHRzID0gdi5ydW5WYWxpZGF0aW9ucyhhdHRyaWJ1dGVzLCBjb25zdHJhaW50cywgb3B0aW9ucyk7XG5cbiAgICAgIHJldHVybiBuZXcgdi5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2LndhaXRGb3JSZXN1bHRzKHJlc3VsdHMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGVycm9ycyA9IHYucHJvY2Vzc1ZhbGlkYXRpb25SZXN1bHRzKHJlc3VsdHMsIG9wdGlvbnMpO1xuICAgICAgICAgIGlmIChlcnJvcnMpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgV3JhcEVycm9ycyhlcnJvcnMsIG9wdGlvbnMsIGF0dHJpYnV0ZXMsIGNvbnN0cmFpbnRzKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUoYXR0cmlidXRlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgc2luZ2xlOiBmdW5jdGlvbih2YWx1ZSwgY29uc3RyYWludHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdi5zaW5nbGUub3B0aW9ucywgb3B0aW9ucywge1xuICAgICAgICBmb3JtYXQ6IFwiZmxhdFwiLFxuICAgICAgICBmdWxsTWVzc2FnZXM6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB2KHtzaW5nbGU6IHZhbHVlfSwge3NpbmdsZTogY29uc3RyYWludHN9LCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGFsbCBwcm9taXNlcyBpbiB0aGUgcmVzdWx0cyBhcnJheVxuICAgIC8vIGFyZSBzZXR0bGVkLiBUaGUgcHJvbWlzZSByZXR1cm5lZCBmcm9tIHRoaXMgZnVuY3Rpb24gaXMgYWx3YXlzIHJlc29sdmVkLFxuICAgIC8vIG5ldmVyIHJlamVjdGVkLlxuICAgIC8vIFRoaXMgZnVuY3Rpb24gbW9kaWZpZXMgdGhlIGlucHV0IGFyZ3VtZW50LCBpdCByZXBsYWNlcyB0aGUgcHJvbWlzZXNcbiAgICAvLyB3aXRoIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBwcm9taXNlLlxuICAgIHdhaXRGb3JSZXN1bHRzOiBmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICAvLyBDcmVhdGUgYSBzZXF1ZW5jZSBvZiBhbGwgdGhlIHJlc3VsdHMgc3RhcnRpbmcgd2l0aCBhIHJlc29sdmVkIHByb21pc2UuXG4gICAgICByZXR1cm4gcmVzdWx0cy5yZWR1Y2UoZnVuY3Rpb24obWVtbywgcmVzdWx0KSB7XG4gICAgICAgIC8vIElmIHRoaXMgcmVzdWx0IGlzbid0IGEgcHJvbWlzZSBza2lwIGl0IGluIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAgaWYgKCF2LmlzUHJvbWlzZShyZXN1bHQuZXJyb3IpKSB7XG4gICAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWVtby50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZXJyb3IudGhlbihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgcmVzdWx0LmVycm9yID0gZXJyb3IgfHwgbnVsbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LCBuZXcgdi5Qcm9taXNlKGZ1bmN0aW9uKHIpIHsgcigpOyB9KSk7IC8vIEEgcmVzb2x2ZWQgcHJvbWlzZVxuICAgIH0sXG5cbiAgICAvLyBJZiB0aGUgZ2l2ZW4gYXJndW1lbnQgaXMgYSBjYWxsOiBmdW5jdGlvbiB0aGUgYW5kOiBmdW5jdGlvbiByZXR1cm4gdGhlIHZhbHVlXG4gICAgLy8gb3RoZXJ3aXNlIGp1c3QgcmV0dXJuIHRoZSB2YWx1ZS4gQWRkaXRpb25hbCBhcmd1bWVudHMgd2lsbCBiZSBwYXNzZWQgYXNcbiAgICAvLyBhcmd1bWVudHMgdG8gdGhlIGZ1bmN0aW9uLlxuICAgIC8vIEV4YW1wbGU6XG4gICAgLy8gYGBgXG4gICAgLy8gcmVzdWx0KCdmb28nKSAvLyAnZm9vJ1xuICAgIC8vIHJlc3VsdChNYXRoLm1heCwgMSwgMikgLy8gMlxuICAgIC8vIGBgYFxuICAgIHJlc3VsdDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgaWYgdGhlIHZhbHVlIGlzIGEgbnVtYmVyLiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90IGNvbnNpZGVyIE5hTiBhXG4gICAgLy8gbnVtYmVyIGxpa2UgbWFueSBvdGhlciBgaXNOdW1iZXJgIGZ1bmN0aW9ucyBkby5cbiAgICBpc051bWJlcjogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSk7XG4gICAgfSxcblxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIG9iamVjdCBpcyBub3QgYSBmdW5jdGlvblxuICAgIGlzRnVuY3Rpb246IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xuICAgIH0sXG5cbiAgICAvLyBBIHNpbXBsZSBjaGVjayB0byB2ZXJpZnkgdGhhdCB0aGUgdmFsdWUgaXMgYW4gaW50ZWdlci4gVXNlcyBgaXNOdW1iZXJgXG4gICAgLy8gYW5kIGEgc2ltcGxlIG1vZHVsbyBjaGVjay5cbiAgICBpc0ludGVnZXI6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdi5pc051bWJlcih2YWx1ZSkgJiYgdmFsdWUgJSAxID09PSAwO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgaWYgdGhlIHZhbHVlIGlzIGEgYm9vbGVhblxuICAgIGlzQm9vbGVhbjogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJztcbiAgICB9LFxuXG4gICAgLy8gVXNlcyB0aGUgYE9iamVjdGAgZnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGdpdmVuIGFyZ3VtZW50IGlzIGFuIG9iamVjdC5cbiAgICBpc09iamVjdDogZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKTtcbiAgICB9LFxuXG4gICAgLy8gU2ltcGx5IGNoZWNrcyBpZiB0aGUgb2JqZWN0IGlzIGFuIGluc3RhbmNlIG9mIGEgZGF0ZVxuICAgIGlzRGF0ZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRGF0ZTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJucyBmYWxzZSBpZiB0aGUgb2JqZWN0IGlzIGBudWxsYCBvZiBgdW5kZWZpbmVkYFxuICAgIGlzRGVmaW5lZDogZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIG9iaiAhPT0gdW5kZWZpbmVkO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgaWYgdGhlIGdpdmVuIGFyZ3VtZW50IGlzIGEgcHJvbWlzZS4gQW55dGhpbmcgd2l0aCBhIGB0aGVuYFxuICAgIC8vIGZ1bmN0aW9uIGlzIGNvbnNpZGVyZWQgYSBwcm9taXNlLlxuICAgIGlzUHJvbWlzZTogZnVuY3Rpb24ocCkge1xuICAgICAgcmV0dXJuICEhcCAmJiB2LmlzRnVuY3Rpb24ocC50aGVuKTtcbiAgICB9LFxuXG4gICAgaXNKcXVlcnlFbGVtZW50OiBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gbyAmJiB2LmlzU3RyaW5nKG8uanF1ZXJ5KTtcbiAgICB9LFxuXG4gICAgaXNEb21FbGVtZW50OiBmdW5jdGlvbihvKSB7XG4gICAgICBpZiAoIW8pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW8ucXVlcnlTZWxlY3RvckFsbCB8fCAhby5xdWVyeVNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHYuaXNPYmplY3QoZG9jdW1lbnQpICYmIG8gPT09IGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zODQzODAvNjk5MzA0XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICByZXR1cm4gbyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG8gJiZcbiAgICAgICAgICB0eXBlb2YgbyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgIG8gIT09IG51bGwgJiZcbiAgICAgICAgICBvLm5vZGVUeXBlID09PSAxICYmXG4gICAgICAgICAgdHlwZW9mIG8ubm9kZU5hbWUgPT09IFwic3RyaW5nXCI7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGlzRW1wdHk6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgYXR0cjtcblxuICAgICAgLy8gTnVsbCBhbmQgdW5kZWZpbmVkIGFyZSBlbXB0eVxuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGZ1bmN0aW9ucyBhcmUgbm9uIGVtcHR5XG4gICAgICBpZiAodi5pc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIFdoaXRlc3BhY2Ugb25seSBzdHJpbmdzIGFyZSBlbXB0eVxuICAgICAgaWYgKHYuaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2LkVNUFRZX1NUUklOR19SRUdFWFAudGVzdCh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZvciBhcnJheXMgd2UgdXNlIHRoZSBsZW5ndGggcHJvcGVydHlcbiAgICAgIGlmICh2LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPT09IDA7XG4gICAgICB9XG5cbiAgICAgIC8vIERhdGVzIGhhdmUgbm8gYXR0cmlidXRlcyBidXQgYXJlbid0IGVtcHR5XG4gICAgICBpZiAodi5pc0RhdGUodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgZmluZCBhdCBsZWFzdCBvbmUgcHJvcGVydHkgd2UgY29uc2lkZXIgaXQgbm9uIGVtcHR5XG4gICAgICBpZiAodi5pc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgZm9yIChhdHRyIGluIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIEZvcm1hdHMgdGhlIHNwZWNpZmllZCBzdHJpbmdzIHdpdGggdGhlIGdpdmVuIHZhbHVlcyBsaWtlIHNvOlxuICAgIC8vIGBgYFxuICAgIC8vIGZvcm1hdChcIkZvbzogJXtmb299XCIsIHtmb286IFwiYmFyXCJ9KSAvLyBcIkZvbyBiYXJcIlxuICAgIC8vIGBgYFxuICAgIC8vIElmIHlvdSB3YW50IHRvIHdyaXRlICV7Li4ufSB3aXRob3V0IGhhdmluZyBpdCByZXBsYWNlZCBzaW1wbHlcbiAgICAvLyBwcmVmaXggaXQgd2l0aCAlIGxpa2UgdGhpcyBgRm9vOiAlJXtmb299YCBhbmQgaXQgd2lsbCBiZSByZXR1cm5lZFxuICAgIC8vIGFzIGBcIkZvbzogJXtmb299XCJgXG4gICAgZm9ybWF0OiB2LmV4dGVuZChmdW5jdGlvbihzdHIsIHZhbHMpIHtcbiAgICAgIGlmICghdi5pc1N0cmluZyhzdHIpKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2Uodi5mb3JtYXQuRk9STUFUX1JFR0VYUCwgZnVuY3Rpb24obTAsIG0xLCBtMikge1xuICAgICAgICBpZiAobTEgPT09ICclJykge1xuICAgICAgICAgIHJldHVybiBcIiV7XCIgKyBtMiArIFwifVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBTdHJpbmcodmFsc1ttMl0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCB7XG4gICAgICAvLyBGaW5kcyAle2tleX0gc3R5bGUgcGF0dGVybnMgaW4gdGhlIGdpdmVuIHN0cmluZ1xuICAgICAgRk9STUFUX1JFR0VYUDogLyglPyklXFx7KFteXFx9XSspXFx9L2dcbiAgICB9KSxcblxuICAgIC8vIFwiUHJldHRpZmllc1wiIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAgLy8gUHJldHRpZnlpbmcgbWVhbnMgcmVwbGFjaW5nIFsuXFxfLV0gd2l0aCBzcGFjZXMgYXMgd2VsbCBhcyBzcGxpdHRpbmdcbiAgICAvLyBjYW1lbCBjYXNlIHdvcmRzLlxuICAgIHByZXR0aWZ5OiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIGlmICh2LmlzTnVtYmVyKHN0cikpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiAyIGRlY2ltYWxzIHJvdW5kIGl0IHRvIHR3b1xuICAgICAgICBpZiAoKHN0ciAqIDEwMCkgJSAxID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIFwiXCIgKyBzdHI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoTWF0aC5yb3VuZChzdHIgKiAxMDApIC8gMTAwKS50b0ZpeGVkKDIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmlzQXJyYXkoc3RyKSkge1xuICAgICAgICByZXR1cm4gc3RyLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiB2LnByZXR0aWZ5KHMpOyB9KS5qb2luKFwiLCBcIik7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmlzT2JqZWN0KHN0cikpIHtcbiAgICAgICAgcmV0dXJuIHN0ci50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbnN1cmUgdGhlIHN0cmluZyBpcyBhY3R1YWxseSBhIHN0cmluZ1xuICAgICAgc3RyID0gXCJcIiArIHN0cjtcblxuICAgICAgcmV0dXJuIHN0clxuICAgICAgICAvLyBTcGxpdHMga2V5cyBzZXBhcmF0ZWQgYnkgcGVyaW9kc1xuICAgICAgICAucmVwbGFjZSgvKFteXFxzXSlcXC4oW15cXHNdKS9nLCAnJDEgJDInKVxuICAgICAgICAvLyBSZW1vdmVzIGJhY2tzbGFzaGVzXG4gICAgICAgIC5yZXBsYWNlKC9cXFxcKy9nLCAnJylcbiAgICAgICAgLy8gUmVwbGFjZXMgLSBhbmQgLSB3aXRoIHNwYWNlXG4gICAgICAgIC5yZXBsYWNlKC9bXy1dL2csICcgJylcbiAgICAgICAgLy8gU3BsaXRzIGNhbWVsIGNhc2VkIHdvcmRzXG4gICAgICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBmdW5jdGlvbihtMCwgbTEsIG0yKSB7XG4gICAgICAgICAgcmV0dXJuIFwiXCIgKyBtMSArIFwiIFwiICsgbTIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgfSxcblxuICAgIHN0cmluZ2lmeVZhbHVlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHYucHJldHRpZnkodmFsdWUpO1xuICAgIH0sXG5cbiAgICBpc1N0cmluZzogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO1xuICAgIH0sXG5cbiAgICBpc0FycmF5OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgaWYgdGhlIG9iamVjdCBpcyBhIGhhc2gsIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gYW4gb2JqZWN0IHRoYXRcbiAgICAvLyBpcyBuZWl0aGVyIGFuIGFycmF5IG5vciBhIGZ1bmN0aW9uLlxuICAgIGlzSGFzaDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB2LmlzT2JqZWN0KHZhbHVlKSAmJiAhdi5pc0FycmF5KHZhbHVlKSAmJiAhdi5pc0Z1bmN0aW9uKHZhbHVlKTtcbiAgICB9LFxuXG4gICAgY29udGFpbnM6IGZ1bmN0aW9uKG9iaiwgdmFsdWUpIHtcbiAgICAgIGlmICghdi5pc0RlZmluZWQob2JqKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAodi5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgcmV0dXJuIG9iai5pbmRleE9mKHZhbHVlKSAhPT0gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgaW4gb2JqO1xuICAgIH0sXG5cbiAgICB1bmlxdWU6IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICBpZiAoIXYuaXNBcnJheShhcnJheSkpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5LmZpbHRlcihmdW5jdGlvbihlbCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgIHJldHVybiBhcnJheS5pbmRleE9mKGVsKSA9PSBpbmRleDtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBmb3JFYWNoS2V5SW5LZXlwYXRoOiBmdW5jdGlvbihvYmplY3QsIGtleXBhdGgsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoIXYuaXNTdHJpbmcoa2V5cGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgdmFyIGtleSA9IFwiXCJcbiAgICAgICAgLCBpXG4gICAgICAgICwgZXNjYXBlID0gZmFsc2U7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXlwYXRoLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHN3aXRjaCAoa2V5cGF0aFtpXSkge1xuICAgICAgICAgIGNhc2UgJy4nOlxuICAgICAgICAgICAgaWYgKGVzY2FwZSkge1xuICAgICAgICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAga2V5ICs9ICcuJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9iamVjdCA9IGNhbGxiYWNrKG9iamVjdCwga2V5LCBmYWxzZSk7XG4gICAgICAgICAgICAgIGtleSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ1xcXFwnOlxuICAgICAgICAgICAgaWYgKGVzY2FwZSkge1xuICAgICAgICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAga2V5ICs9ICdcXFxcJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVzY2FwZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGtleSArPSBrZXlwYXRoW2ldO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG9iamVjdCwga2V5LCB0cnVlKTtcbiAgICB9LFxuXG4gICAgZ2V0RGVlcE9iamVjdFZhbHVlOiBmdW5jdGlvbihvYmosIGtleXBhdGgpIHtcbiAgICAgIGlmICghdi5pc09iamVjdChvYmopKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2LmZvckVhY2hLZXlJbktleXBhdGgob2JqLCBrZXlwYXRoLCBmdW5jdGlvbihvYmosIGtleSkge1xuICAgICAgICBpZiAodi5pc09iamVjdChvYmopKSB7XG4gICAgICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gVGhpcyByZXR1cm5zIGFuIG9iamVjdCB3aXRoIGFsbCB0aGUgdmFsdWVzIG9mIHRoZSBmb3JtLlxuICAgIC8vIEl0IHVzZXMgdGhlIGlucHV0IG5hbWUgYXMga2V5IGFuZCB0aGUgdmFsdWUgYXMgdmFsdWVcbiAgICAvLyBTbyBmb3IgZXhhbXBsZSB0aGlzOlxuICAgIC8vIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJlbWFpbFwiIHZhbHVlPVwiZm9vQGJhci5jb21cIiAvPlxuICAgIC8vIHdvdWxkIHJldHVybjpcbiAgICAvLyB7ZW1haWw6IFwiZm9vQGJhci5jb21cIn1cbiAgICBjb2xsZWN0Rm9ybVZhbHVlczogZnVuY3Rpb24oZm9ybSwgb3B0aW9ucykge1xuICAgICAgdmFyIHZhbHVlcyA9IHt9XG4gICAgICAgICwgaVxuICAgICAgICAsIGpcbiAgICAgICAgLCBpbnB1dFxuICAgICAgICAsIGlucHV0c1xuICAgICAgICAsIG9wdGlvblxuICAgICAgICAsIHZhbHVlO1xuXG4gICAgICBpZiAodi5pc0pxdWVyeUVsZW1lbnQoZm9ybSkpIHtcbiAgICAgICAgZm9ybSA9IGZvcm1bMF07XG4gICAgICB9XG5cbiAgICAgIGlmICghZm9ybSkge1xuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRbbmFtZV0sIHRleHRhcmVhW25hbWVdXCIpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpbnB1dCA9IGlucHV0cy5pdGVtKGkpO1xuXG4gICAgICAgIGlmICh2LmlzRGVmaW5lZChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlnbm9yZWRcIikpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YWx1ZSA9IHYuc2FuaXRpemVGb3JtVmFsdWUoaW5wdXQudmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgPyArdmFsdWUgOiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnR5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgICAgIGlmIChpbnB1dC5hdHRyaWJ1dGVzLnZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIWlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZXNbaW5wdXQubmFtZV0gfHwgbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBpbnB1dC5jaGVja2VkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC50eXBlID09PSBcInJhZGlvXCIpIHtcbiAgICAgICAgICBpZiAoIWlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWVzW2lucHV0Lm5hbWVdIHx8IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICBpbnB1dHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzZWxlY3RbbmFtZV1cIik7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlucHV0ID0gaW5wdXRzLml0ZW0oaSk7XG4gICAgICAgIGlmIChpbnB1dC5tdWx0aXBsZSkge1xuICAgICAgICAgIHZhbHVlID0gW107XG4gICAgICAgICAgZm9yIChqIGluIGlucHV0Lm9wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbiA9IGlucHV0Lm9wdGlvbnNbal07XG4gICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgIHZhbHVlLnB1c2godi5zYW5pdGl6ZUZvcm1WYWx1ZShvcHRpb24udmFsdWUsIG9wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSB2LnNhbml0aXplRm9ybVZhbHVlKGlucHV0Lm9wdGlvbnNbaW5wdXQuc2VsZWN0ZWRJbmRleF0udmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH0sXG5cbiAgICBzYW5pdGl6ZUZvcm1WYWx1ZTogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zLnRyaW0gJiYgdi5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLm51bGxpZnkgIT09IGZhbHNlICYmIHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG5cbiAgICBjYXBpdGFsaXplOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgIGlmICghdi5pc1N0cmluZyhzdHIpKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyWzBdLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhbGwgZXJyb3JzIHdobydzIGVycm9yIGF0dHJpYnV0ZSBpcyBlbXB0eSAobnVsbCBvciB1bmRlZmluZWQpXG4gICAgcHJ1bmVFbXB0eUVycm9yczogZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgICByZXR1cm4gZXJyb3JzLmZpbHRlcihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICByZXR1cm4gIXYuaXNFbXB0eShlcnJvci5lcnJvcik7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gSW5cbiAgICAvLyBbe2Vycm9yOiBbXCJlcnIxXCIsIFwiZXJyMlwiXSwgLi4ufV1cbiAgICAvLyBPdXRcbiAgICAvLyBbe2Vycm9yOiBcImVycjFcIiwgLi4ufSwge2Vycm9yOiBcImVycjJcIiwgLi4ufV1cbiAgICAvL1xuICAgIC8vIEFsbCBhdHRyaWJ1dGVzIGluIGFuIGVycm9yIHdpdGggbXVsdGlwbGUgbWVzc2FnZXMgYXJlIGR1cGxpY2F0ZWRcbiAgICAvLyB3aGVuIGV4cGFuZGluZyB0aGUgZXJyb3JzLlxuICAgIGV4cGFuZE11bHRpcGxlRXJyb3JzOiBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgIGVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIC8vIFJlbW92ZXMgZXJyb3JzIHdpdGhvdXQgYSBtZXNzYWdlXG4gICAgICAgIGlmICh2LmlzQXJyYXkoZXJyb3IuZXJyb3IpKSB7XG4gICAgICAgICAgZXJyb3IuZXJyb3IuZm9yRWFjaChmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgICAgIHJldC5wdXNoKHYuZXh0ZW5kKHt9LCBlcnJvciwge2Vycm9yOiBtc2d9KSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0LnB1c2goZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcblxuICAgIC8vIENvbnZlcnRzIHRoZSBlcnJvciBtZXNhZ2VzIGJ5IHByZXBlbmRpbmcgdGhlIGF0dHJpYnV0ZSBuYW1lIHVubGVzcyB0aGVcbiAgICAvLyBtZXNzYWdlIGlzIHByZWZpeGVkIGJ5IF5cbiAgICBjb252ZXJ0RXJyb3JNZXNzYWdlczogZnVuY3Rpb24oZXJyb3JzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgZXJyb3JzLmZvckVhY2goZnVuY3Rpb24oZXJyb3JJbmZvKSB7XG4gICAgICAgIHZhciBlcnJvciA9IHYucmVzdWx0KGVycm9ySW5mby5lcnJvcixcbiAgICAgICAgICAgIGVycm9ySW5mby52YWx1ZSxcbiAgICAgICAgICAgIGVycm9ySW5mby5hdHRyaWJ1dGUsXG4gICAgICAgICAgICBlcnJvckluZm8ub3B0aW9ucyxcbiAgICAgICAgICAgIGVycm9ySW5mby5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgZXJyb3JJbmZvLmdsb2JhbE9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghdi5pc1N0cmluZyhlcnJvcikpIHtcbiAgICAgICAgICByZXQucHVzaChlcnJvckluZm8pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnJvclswXSA9PT0gJ14nKSB7XG4gICAgICAgICAgZXJyb3IgPSBlcnJvci5zbGljZSgxKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmZ1bGxNZXNzYWdlcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBlcnJvciA9IHYuY2FwaXRhbGl6ZSh2LnByZXR0aWZ5KGVycm9ySW5mby5hdHRyaWJ1dGUpKSArIFwiIFwiICsgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZXJyb3IgPSBlcnJvci5yZXBsYWNlKC9cXFxcXFxeL2csIFwiXlwiKTtcbiAgICAgICAgZXJyb3IgPSB2LmZvcm1hdChlcnJvciwge3ZhbHVlOiB2LnN0cmluZ2lmeVZhbHVlKGVycm9ySW5mby52YWx1ZSl9KTtcbiAgICAgICAgcmV0LnB1c2godi5leHRlbmQoe30sIGVycm9ySW5mbywge2Vycm9yOiBlcnJvcn0pKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9LFxuXG4gICAgLy8gSW46XG4gICAgLy8gW3thdHRyaWJ1dGU6IFwiPGF0dHJpYnV0ZU5hbWU+XCIsIC4uLn1dXG4gICAgLy8gT3V0OlxuICAgIC8vIHtcIjxhdHRyaWJ1dGVOYW1lPlwiOiBbe2F0dHJpYnV0ZTogXCI8YXR0cmlidXRlTmFtZT5cIiwgLi4ufV19XG4gICAgZ3JvdXBFcnJvcnNCeUF0dHJpYnV0ZTogZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgICB2YXIgcmV0ID0ge307XG4gICAgICBlcnJvcnMuZm9yRWFjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICB2YXIgbGlzdCA9IHJldFtlcnJvci5hdHRyaWJ1dGVdO1xuICAgICAgICBpZiAobGlzdCkge1xuICAgICAgICAgIGxpc3QucHVzaChlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0W2Vycm9yLmF0dHJpYnV0ZV0gPSBbZXJyb3JdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcblxuICAgIC8vIEluOlxuICAgIC8vIFt7ZXJyb3I6IFwiPG1lc3NhZ2UgMT5cIiwgLi4ufSwge2Vycm9yOiBcIjxtZXNzYWdlIDI+XCIsIC4uLn1dXG4gICAgLy8gT3V0OlxuICAgIC8vIFtcIjxtZXNzYWdlIDE+XCIsIFwiPG1lc3NhZ2UgMj5cIl1cbiAgICBmbGF0dGVuRXJyb3JzVG9BcnJheTogZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgICByZXR1cm4gZXJyb3JzXG4gICAgICAgIC5tYXAoZnVuY3Rpb24oZXJyb3IpIHsgcmV0dXJuIGVycm9yLmVycm9yOyB9KVxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgc2VsZikge1xuICAgICAgICAgIHJldHVybiBzZWxmLmluZGV4T2YodmFsdWUpID09PSBpbmRleDtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGNsZWFuQXR0cmlidXRlczogZnVuY3Rpb24oYXR0cmlidXRlcywgd2hpdGVsaXN0KSB7XG4gICAgICBmdW5jdGlvbiB3aGl0ZWxpc3RDcmVhdG9yKG9iaiwga2V5LCBsYXN0KSB7XG4gICAgICAgIGlmICh2LmlzT2JqZWN0KG9ialtrZXldKSkge1xuICAgICAgICAgIHJldHVybiBvYmpba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG9ialtrZXldID0gbGFzdCA/IHRydWUgOiB7fSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkT2JqZWN0V2hpdGVsaXN0KHdoaXRlbGlzdCkge1xuICAgICAgICB2YXIgb3cgPSB7fVxuICAgICAgICAgICwgbGFzdE9iamVjdFxuICAgICAgICAgICwgYXR0cjtcbiAgICAgICAgZm9yIChhdHRyIGluIHdoaXRlbGlzdCkge1xuICAgICAgICAgIGlmICghd2hpdGVsaXN0W2F0dHJdKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdi5mb3JFYWNoS2V5SW5LZXlwYXRoKG93LCBhdHRyLCB3aGl0ZWxpc3RDcmVhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3c7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFuUmVjdXJzaXZlKGF0dHJpYnV0ZXMsIHdoaXRlbGlzdCkge1xuICAgICAgICBpZiAoIXYuaXNPYmplY3QoYXR0cmlidXRlcykpIHtcbiAgICAgICAgICByZXR1cm4gYXR0cmlidXRlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXQgPSB2LmV4dGVuZCh7fSwgYXR0cmlidXRlcylcbiAgICAgICAgICAsIHdcbiAgICAgICAgICAsIGF0dHJpYnV0ZTtcblxuICAgICAgICBmb3IgKGF0dHJpYnV0ZSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgdyA9IHdoaXRlbGlzdFthdHRyaWJ1dGVdO1xuXG4gICAgICAgICAgaWYgKHYuaXNPYmplY3QodykpIHtcbiAgICAgICAgICAgIHJldFthdHRyaWJ1dGVdID0gY2xlYW5SZWN1cnNpdmUocmV0W2F0dHJpYnV0ZV0sIHcpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXcpIHtcbiAgICAgICAgICAgIGRlbGV0ZSByZXRbYXR0cmlidXRlXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cblxuICAgICAgaWYgKCF2LmlzT2JqZWN0KHdoaXRlbGlzdCkgfHwgIXYuaXNPYmplY3QoYXR0cmlidXRlcykpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfVxuXG4gICAgICB3aGl0ZWxpc3QgPSBidWlsZE9iamVjdFdoaXRlbGlzdCh3aGl0ZWxpc3QpO1xuICAgICAgcmV0dXJuIGNsZWFuUmVjdXJzaXZlKGF0dHJpYnV0ZXMsIHdoaXRlbGlzdCk7XG4gICAgfSxcblxuICAgIGV4cG9zZU1vZHVsZTogZnVuY3Rpb24odmFsaWRhdGUsIHJvb3QsIGV4cG9ydHMsIG1vZHVsZSwgZGVmaW5lKSB7XG4gICAgICBpZiAoZXhwb3J0cykge1xuICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZXhwb3J0cy52YWxpZGF0ZSA9IHZhbGlkYXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdC52YWxpZGF0ZSA9IHZhbGlkYXRlO1xuICAgICAgICBpZiAodmFsaWRhdGUuaXNGdW5jdGlvbihkZWZpbmUpICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgICBkZWZpbmUoW10sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbGlkYXRlOyB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICB3YXJuOiBmdW5jdGlvbihtc2cpIHtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiW3ZhbGlkYXRlLmpzXSBcIiArIG1zZyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGVycm9yOiBmdW5jdGlvbihtc2cpIHtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlLmVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbdmFsaWRhdGUuanNdIFwiICsgbXNnKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHZhbGlkYXRlLnZhbGlkYXRvcnMgPSB7XG4gICAgLy8gUHJlc2VuY2UgdmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGlzbid0IGVtcHR5XG4gICAgcHJlc2VuY2U6IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBpZiAob3B0aW9ucy5hbGxvd0VtcHR5ID8gIXYuaXNEZWZpbmVkKHZhbHVlKSA6IHYuaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMubWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UgfHwgXCJjYW4ndCBiZSBibGFua1wiO1xuICAgICAgfVxuICAgIH0sXG4gICAgbGVuZ3RoOiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucywgYXR0cmlidXRlKSB7XG4gICAgICAvLyBFbXB0eSB2YWx1ZXMgYXJlIGFsbG93ZWRcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgaXMgPSBvcHRpb25zLmlzXG4gICAgICAgICwgbWF4aW11bSA9IG9wdGlvbnMubWF4aW11bVxuICAgICAgICAsIG1pbmltdW0gPSBvcHRpb25zLm1pbmltdW1cbiAgICAgICAgLCB0b2tlbml6ZXIgPSBvcHRpb25zLnRva2VuaXplciB8fCBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbDsgfVxuICAgICAgICAsIGVyclxuICAgICAgICAsIGVycm9ycyA9IFtdO1xuXG4gICAgICB2YWx1ZSA9IHRva2VuaXplcih2YWx1ZSk7XG4gICAgICB2YXIgbGVuZ3RoID0gdmFsdWUubGVuZ3RoO1xuICAgICAgaWYoIXYuaXNOdW1iZXIobGVuZ3RoKSkge1xuICAgICAgICB2LmVycm9yKHYuZm9ybWF0KFwiQXR0cmlidXRlICV7YXR0cn0gaGFzIGEgbm9uIG51bWVyaWMgdmFsdWUgZm9yIGBsZW5ndGhgXCIsIHthdHRyOiBhdHRyaWJ1dGV9KSk7XG4gICAgICAgIHJldHVybiBvcHRpb25zLm1lc3NhZ2UgfHwgdGhpcy5ub3RWYWxpZCB8fCBcImhhcyBhbiBpbmNvcnJlY3QgbGVuZ3RoXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIElzIGNoZWNrc1xuICAgICAgaWYgKHYuaXNOdW1iZXIoaXMpICYmIGxlbmd0aCAhPT0gaXMpIHtcbiAgICAgICAgZXJyID0gb3B0aW9ucy53cm9uZ0xlbmd0aCB8fFxuICAgICAgICAgIHRoaXMud3JvbmdMZW5ndGggfHxcbiAgICAgICAgICBcImlzIHRoZSB3cm9uZyBsZW5ndGggKHNob3VsZCBiZSAle2NvdW50fSBjaGFyYWN0ZXJzKVwiO1xuICAgICAgICBlcnJvcnMucHVzaCh2LmZvcm1hdChlcnIsIHtjb3VudDogaXN9KSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmlzTnVtYmVyKG1pbmltdW0pICYmIGxlbmd0aCA8IG1pbmltdW0pIHtcbiAgICAgICAgZXJyID0gb3B0aW9ucy50b29TaG9ydCB8fFxuICAgICAgICAgIHRoaXMudG9vU2hvcnQgfHxcbiAgICAgICAgICBcImlzIHRvbyBzaG9ydCAobWluaW11bSBpcyAle2NvdW50fSBjaGFyYWN0ZXJzKVwiO1xuICAgICAgICBlcnJvcnMucHVzaCh2LmZvcm1hdChlcnIsIHtjb3VudDogbWluaW11bX0pKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHYuaXNOdW1iZXIobWF4aW11bSkgJiYgbGVuZ3RoID4gbWF4aW11bSkge1xuICAgICAgICBlcnIgPSBvcHRpb25zLnRvb0xvbmcgfHxcbiAgICAgICAgICB0aGlzLnRvb0xvbmcgfHxcbiAgICAgICAgICBcImlzIHRvbyBsb25nIChtYXhpbXVtIGlzICV7Y291bnR9IGNoYXJhY3RlcnMpXCI7XG4gICAgICAgIGVycm9ycy5wdXNoKHYuZm9ybWF0KGVyciwge2NvdW50OiBtYXhpbXVtfSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMubWVzc2FnZSB8fCBlcnJvcnM7XG4gICAgICB9XG4gICAgfSxcbiAgICBudW1lcmljYWxpdHk6IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAvLyBFbXB0eSB2YWx1ZXMgYXJlIGZpbmVcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgZXJyb3JzID0gW11cbiAgICAgICAgLCBuYW1lXG4gICAgICAgICwgY291bnRcbiAgICAgICAgLCBjaGVja3MgPSB7XG4gICAgICAgICAgICBncmVhdGVyVGhhbjogICAgICAgICAgZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiA+IGM7IH0sXG4gICAgICAgICAgICBncmVhdGVyVGhhbk9yRXF1YWxUbzogZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiA+PSBjOyB9LFxuICAgICAgICAgICAgZXF1YWxUbzogICAgICAgICAgICAgIGZ1bmN0aW9uKHYsIGMpIHsgcmV0dXJuIHYgPT09IGM7IH0sXG4gICAgICAgICAgICBsZXNzVGhhbjogICAgICAgICAgICAgZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiA8IGM7IH0sXG4gICAgICAgICAgICBsZXNzVGhhbk9yRXF1YWxUbzogICAgZnVuY3Rpb24odiwgYykgeyByZXR1cm4gdiA8PSBjOyB9LFxuICAgICAgICAgICAgZGl2aXNpYmxlQnk6ICAgICAgICAgIGZ1bmN0aW9uKHYsIGMpIHsgcmV0dXJuIHYgJSBjID09PSAwOyB9XG4gICAgICAgICAgfTtcblxuICAgICAgLy8gU3RyaWN0IHdpbGwgY2hlY2sgdGhhdCBpdCBpcyBhIHZhbGlkIGxvb2tpbmcgbnVtYmVyXG4gICAgICBpZiAodi5pc1N0cmluZyh2YWx1ZSkgJiYgb3B0aW9ucy5zdHJpY3QpIHtcbiAgICAgICAgdmFyIHBhdHRlcm4gPSBcIl4oMHxbMS05XVxcXFxkKilcIjtcbiAgICAgICAgaWYgKCFvcHRpb25zLm9ubHlJbnRlZ2VyKSB7XG4gICAgICAgICAgcGF0dGVybiArPSBcIihcXFxcLlxcXFxkKyk/XCI7XG4gICAgICAgIH1cbiAgICAgICAgcGF0dGVybiArPSBcIiRcIjtcblxuICAgICAgICBpZiAoIShuZXcgUmVnRXhwKHBhdHRlcm4pLnRlc3QodmFsdWUpKSkge1xuICAgICAgICAgIHJldHVybiBvcHRpb25zLm1lc3NhZ2UgfHxcbiAgICAgICAgICAgIG9wdGlvbnMubm90VmFsaWQgfHxcbiAgICAgICAgICAgIHRoaXMubm90VmFsaWQgfHxcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSB8fFxuICAgICAgICAgICAgXCJtdXN0IGJlIGEgdmFsaWQgbnVtYmVyXCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ29lcmNlIHRoZSB2YWx1ZSB0byBhIG51bWJlciB1bmxlc3Mgd2UncmUgYmVpbmcgc3RyaWN0LlxuICAgICAgaWYgKG9wdGlvbnMubm9TdHJpbmdzICE9PSB0cnVlICYmIHYuaXNTdHJpbmcodmFsdWUpICYmICF2LmlzRW1wdHkodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gK3ZhbHVlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBpdCdzIG5vdCBhIG51bWJlciB3ZSBzaG91bGRuJ3QgY29udGludWUgc2luY2UgaXQgd2lsbCBjb21wYXJlIGl0LlxuICAgICAgaWYgKCF2LmlzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5tZXNzYWdlIHx8XG4gICAgICAgICAgb3B0aW9ucy5ub3RWYWxpZCB8fFxuICAgICAgICAgIHRoaXMubm90VmFsaWQgfHxcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UgfHxcbiAgICAgICAgICBcImlzIG5vdCBhIG51bWJlclwiO1xuICAgICAgfVxuXG4gICAgICAvLyBTYW1lIGxvZ2ljIGFzIGFib3ZlLCBzb3J0IG9mLiBEb24ndCBib3RoZXIgd2l0aCBjb21wYXJpc29ucyBpZiB0aGlzXG4gICAgICAvLyBkb2Vzbid0IHBhc3MuXG4gICAgICBpZiAob3B0aW9ucy5vbmx5SW50ZWdlciAmJiAhdi5pc0ludGVnZXIodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLm1lc3NhZ2UgfHxcbiAgICAgICAgICBvcHRpb25zLm5vdEludGVnZXIgfHxcbiAgICAgICAgICB0aGlzLm5vdEludGVnZXIgfHxcbiAgICAgICAgICB0aGlzLm1lc3NhZ2UgfHxcbiAgICAgICAgICBcIm11c3QgYmUgYW4gaW50ZWdlclwiO1xuICAgICAgfVxuXG4gICAgICBmb3IgKG5hbWUgaW4gY2hlY2tzKSB7XG4gICAgICAgIGNvdW50ID0gb3B0aW9uc1tuYW1lXTtcbiAgICAgICAgaWYgKHYuaXNOdW1iZXIoY291bnQpICYmICFjaGVja3NbbmFtZV0odmFsdWUsIGNvdW50KSkge1xuICAgICAgICAgIC8vIFRoaXMgcGlja3MgdGhlIGRlZmF1bHQgbWVzc2FnZSBpZiBzcGVjaWZpZWRcbiAgICAgICAgICAvLyBGb3IgZXhhbXBsZSB0aGUgZ3JlYXRlclRoYW4gY2hlY2sgdXNlcyB0aGUgbWVzc2FnZSBmcm9tXG4gICAgICAgICAgLy8gdGhpcy5ub3RHcmVhdGVyVGhhbiBzbyB3ZSBjYXBpdGFsaXplIHRoZSBuYW1lIGFuZCBwcmVwZW5kIFwibm90XCJcbiAgICAgICAgICB2YXIga2V5ID0gXCJub3RcIiArIHYuY2FwaXRhbGl6ZShuYW1lKTtcbiAgICAgICAgICB2YXIgbXNnID0gb3B0aW9uc1trZXldIHx8XG4gICAgICAgICAgICB0aGlzW2tleV0gfHxcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSB8fFxuICAgICAgICAgICAgXCJtdXN0IGJlICV7dHlwZX0gJXtjb3VudH1cIjtcblxuICAgICAgICAgIGVycm9ycy5wdXNoKHYuZm9ybWF0KG1zZywge1xuICAgICAgICAgICAgY291bnQ6IGNvdW50LFxuICAgICAgICAgICAgdHlwZTogdi5wcmV0dGlmeShuYW1lKVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5vZGQgJiYgdmFsdWUgJSAyICE9PSAxKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKG9wdGlvbnMubm90T2RkIHx8XG4gICAgICAgICAgICB0aGlzLm5vdE9kZCB8fFxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgICAgICBcIm11c3QgYmUgb2RkXCIpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuZXZlbiAmJiB2YWx1ZSAlIDIgIT09IDApIHtcbiAgICAgICAgZXJyb3JzLnB1c2gob3B0aW9ucy5ub3RFdmVuIHx8XG4gICAgICAgICAgICB0aGlzLm5vdEV2ZW4gfHxcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSB8fFxuICAgICAgICAgICAgXCJtdXN0IGJlIGV2ZW5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLm1lc3NhZ2UgfHwgZXJyb3JzO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGF0ZXRpbWU6IHYuZXh0ZW5kKGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICBpZiAoIXYuaXNGdW5jdGlvbih0aGlzLnBhcnNlKSB8fCAhdi5pc0Z1bmN0aW9uKHRoaXMuZm9ybWF0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCb3RoIHRoZSBwYXJzZSBhbmQgZm9ybWF0IGZ1bmN0aW9ucyBuZWVkcyB0byBiZSBzZXQgdG8gdXNlIHRoZSBkYXRldGltZS9kYXRlIHZhbGlkYXRvclwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW1wdHkgdmFsdWVzIGFyZSBmaW5lXG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgdmFyIGVyclxuICAgICAgICAsIGVycm9ycyA9IFtdXG4gICAgICAgICwgZWFybGllc3QgPSBvcHRpb25zLmVhcmxpZXN0ID8gdGhpcy5wYXJzZShvcHRpb25zLmVhcmxpZXN0LCBvcHRpb25zKSA6IE5hTlxuICAgICAgICAsIGxhdGVzdCA9IG9wdGlvbnMubGF0ZXN0ID8gdGhpcy5wYXJzZShvcHRpb25zLmxhdGVzdCwgb3B0aW9ucykgOiBOYU47XG5cbiAgICAgIHZhbHVlID0gdGhpcy5wYXJzZSh2YWx1ZSwgb3B0aW9ucyk7XG5cbiAgICAgIC8vIDg2NDAwMDAwIGlzIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBpbiBhIGRheSwgdGhpcyBpcyB1c2VkIHRvIHJlbW92ZVxuICAgICAgLy8gdGhlIHRpbWUgZnJvbSB0aGUgZGF0ZVxuICAgICAgaWYgKGlzTmFOKHZhbHVlKSB8fCBvcHRpb25zLmRhdGVPbmx5ICYmIHZhbHVlICUgODY0MDAwMDAgIT09IDApIHtcbiAgICAgICAgZXJyID0gb3B0aW9ucy5ub3RWYWxpZCB8fFxuICAgICAgICAgIG9wdGlvbnMubWVzc2FnZSB8fFxuICAgICAgICAgIHRoaXMubm90VmFsaWQgfHxcbiAgICAgICAgICBcIm11c3QgYmUgYSB2YWxpZCBkYXRlXCI7XG4gICAgICAgIHJldHVybiB2LmZvcm1hdChlcnIsIHt2YWx1ZTogYXJndW1lbnRzWzBdfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oZWFybGllc3QpICYmIHZhbHVlIDwgZWFybGllc3QpIHtcbiAgICAgICAgZXJyID0gb3B0aW9ucy50b29FYXJseSB8fFxuICAgICAgICAgIG9wdGlvbnMubWVzc2FnZSB8fFxuICAgICAgICAgIHRoaXMudG9vRWFybHkgfHxcbiAgICAgICAgICBcIm11c3QgYmUgbm8gZWFybGllciB0aGFuICV7ZGF0ZX1cIjtcbiAgICAgICAgZXJyID0gdi5mb3JtYXQoZXJyLCB7XG4gICAgICAgICAgdmFsdWU6IHRoaXMuZm9ybWF0KHZhbHVlLCBvcHRpb25zKSxcbiAgICAgICAgICBkYXRlOiB0aGlzLmZvcm1hdChlYXJsaWVzdCwgb3B0aW9ucylcbiAgICAgICAgfSk7XG4gICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4obGF0ZXN0KSAmJiB2YWx1ZSA+IGxhdGVzdCkge1xuICAgICAgICBlcnIgPSBvcHRpb25zLnRvb0xhdGUgfHxcbiAgICAgICAgICBvcHRpb25zLm1lc3NhZ2UgfHxcbiAgICAgICAgICB0aGlzLnRvb0xhdGUgfHxcbiAgICAgICAgICBcIm11c3QgYmUgbm8gbGF0ZXIgdGhhbiAle2RhdGV9XCI7XG4gICAgICAgIGVyciA9IHYuZm9ybWF0KGVyciwge1xuICAgICAgICAgIGRhdGU6IHRoaXMuZm9ybWF0KGxhdGVzdCwgb3B0aW9ucyksXG4gICAgICAgICAgdmFsdWU6IHRoaXMuZm9ybWF0KHZhbHVlLCBvcHRpb25zKVxuICAgICAgICB9KTtcbiAgICAgICAgZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHYudW5pcXVlKGVycm9ycyk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcGFyc2U6IG51bGwsXG4gICAgICBmb3JtYXQ6IG51bGxcbiAgICB9KSxcbiAgICBkYXRlOiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCBvcHRpb25zLCB7ZGF0ZU9ubHk6IHRydWV9KTtcbiAgICAgIHJldHVybiB2LnZhbGlkYXRvcnMuZGF0ZXRpbWUuY2FsbCh2LnZhbGlkYXRvcnMuZGF0ZXRpbWUsIHZhbHVlLCBvcHRpb25zKTtcbiAgICB9LFxuICAgIGZvcm1hdDogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIGlmICh2LmlzU3RyaW5nKG9wdGlvbnMpIHx8IChvcHRpb25zIGluc3RhbmNlb2YgUmVnRXhwKSkge1xuICAgICAgICBvcHRpb25zID0ge3BhdHRlcm46IG9wdGlvbnN9O1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlIHx8IHRoaXMubWVzc2FnZSB8fCBcImlzIGludmFsaWRcIlxuICAgICAgICAsIHBhdHRlcm4gPSBvcHRpb25zLnBhdHRlcm5cbiAgICAgICAgLCBtYXRjaDtcblxuICAgICAgLy8gRW1wdHkgdmFsdWVzIGFyZSBhbGxvd2VkXG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXYuaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgfVxuXG4gICAgICBpZiAodi5pc1N0cmluZyhwYXR0ZXJuKSkge1xuICAgICAgICBwYXR0ZXJuID0gbmV3IFJlZ0V4cChvcHRpb25zLnBhdHRlcm4sIG9wdGlvbnMuZmxhZ3MpO1xuICAgICAgfVxuICAgICAgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWModmFsdWUpO1xuICAgICAgaWYgKCFtYXRjaCB8fCBtYXRjaFswXS5sZW5ndGggIT0gdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgfVxuICAgIH0sXG4gICAgaW5jbHVzaW9uOiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgLy8gRW1wdHkgdmFsdWVzIGFyZSBmaW5lXG4gICAgICBpZiAoIXYuaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodi5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7d2l0aGluOiBvcHRpb25zfTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSB2LmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIGlmICh2LmNvbnRhaW5zKG9wdGlvbnMud2l0aGluLCB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2UgfHxcbiAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgIFwiXiV7dmFsdWV9IGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgbGlzdFwiO1xuICAgICAgcmV0dXJuIHYuZm9ybWF0KG1lc3NhZ2UsIHt2YWx1ZTogdmFsdWV9KTtcbiAgICB9LFxuICAgIGV4Y2x1c2lvbjogZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIC8vIEVtcHR5IHZhbHVlcyBhcmUgZmluZVxuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHYuaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICBvcHRpb25zID0ge3dpdGhpbjogb3B0aW9uc307XG4gICAgICB9XG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBpZiAoIXYuY29udGFpbnMob3B0aW9ucy53aXRoaW4sIHZhbHVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UgfHwgXCJeJXt2YWx1ZX0gaXMgcmVzdHJpY3RlZFwiO1xuICAgICAgcmV0dXJuIHYuZm9ybWF0KG1lc3NhZ2UsIHt2YWx1ZTogdmFsdWV9KTtcbiAgICB9LFxuICAgIGVtYWlsOiB2LmV4dGVuZChmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlIHx8IFwiaXMgbm90IGEgdmFsaWQgZW1haWxcIjtcbiAgICAgIC8vIEVtcHR5IHZhbHVlcyBhcmUgZmluZVxuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCF2LmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5QQVRURVJOLmV4ZWModmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIFBBVFRFUk46IC9eW2EtejAtOVxcdTAwN0YtXFx1ZmZmZiEjJCUmJyorXFwvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOVxcdTAwN0YtXFx1ZmZmZiEjJCUmJyorXFwvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2Etel17Mix9JC9pXG4gICAgfSksXG4gICAgZXF1YWxpdHk6IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zLCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgIGlmICghdi5pc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHYuaXNTdHJpbmcob3B0aW9ucykpIHtcbiAgICAgICAgb3B0aW9ucyA9IHthdHRyaWJ1dGU6IG9wdGlvbnN9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucyA9IHYuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgdmFyIG1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2UgfHxcbiAgICAgICAgdGhpcy5tZXNzYWdlIHx8XG4gICAgICAgIFwiaXMgbm90IGVxdWFsIHRvICV7YXR0cmlidXRlfVwiO1xuXG4gICAgICBpZiAodi5pc0VtcHR5KG9wdGlvbnMuYXR0cmlidXRlKSB8fCAhdi5pc1N0cmluZyhvcHRpb25zLmF0dHJpYnV0ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGF0dHJpYnV0ZSBtdXN0IGJlIGEgbm9uIGVtcHR5IHN0cmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG90aGVyVmFsdWUgPSB2LmdldERlZXBPYmplY3RWYWx1ZShhdHRyaWJ1dGVzLCBvcHRpb25zLmF0dHJpYnV0ZSlcbiAgICAgICAgLCBjb21wYXJhdG9yID0gb3B0aW9ucy5jb21wYXJhdG9yIHx8IGZ1bmN0aW9uKHYxLCB2Mikge1xuICAgICAgICAgIHJldHVybiB2MSA9PT0gdjI7XG4gICAgICAgIH07XG5cbiAgICAgIGlmICghY29tcGFyYXRvcih2YWx1ZSwgb3RoZXJWYWx1ZSwgb3B0aW9ucywgYXR0cmlidXRlLCBhdHRyaWJ1dGVzKSkge1xuICAgICAgICByZXR1cm4gdi5mb3JtYXQobWVzc2FnZSwge2F0dHJpYnV0ZTogdi5wcmV0dGlmeShvcHRpb25zLmF0dHJpYnV0ZSl9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gQSBVUkwgdmFsaWRhdG9yIHRoYXQgaXMgdXNlZCB0byB2YWxpZGF0ZSBVUkxzIHdpdGggdGhlIGFiaWxpdHkgdG9cbiAgICAvLyByZXN0cmljdCBzY2hlbWVzIGFuZCBzb21lIGRvbWFpbnMuXG4gICAgdXJsOiBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgaWYgKCF2LmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gdi5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlIHx8IHRoaXMubWVzc2FnZSB8fCBcImlzIG5vdCBhIHZhbGlkIHVybFwiXG4gICAgICAgICwgc2NoZW1lcyA9IG9wdGlvbnMuc2NoZW1lcyB8fCB0aGlzLnNjaGVtZXMgfHwgWydodHRwJywgJ2h0dHBzJ11cbiAgICAgICAgLCBhbGxvd0xvY2FsID0gb3B0aW9ucy5hbGxvd0xvY2FsIHx8IHRoaXMuYWxsb3dMb2NhbCB8fCBmYWxzZTtcblxuICAgICAgaWYgKCF2LmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgIH1cblxuICAgICAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZHBlcmluaS83MjkyOTRcbiAgICAgIHZhciByZWdleCA9XG4gICAgICAgIFwiXlwiICtcbiAgICAgICAgLy8gcHJvdG9jb2wgaWRlbnRpZmllclxuICAgICAgICBcIig/Oig/OlwiICsgc2NoZW1lcy5qb2luKFwifFwiKSArIFwiKTovLylcIiArXG4gICAgICAgIC8vIHVzZXI6cGFzcyBhdXRoZW50aWNhdGlvblxuICAgICAgICBcIig/OlxcXFxTKyg/OjpcXFxcUyopP0ApP1wiICtcbiAgICAgICAgXCIoPzpcIjtcblxuICAgICAgdmFyIHRsZCA9IFwiKD86XFxcXC4oPzpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZl17Mix9KSlcIjtcblxuICAgICAgaWYgKGFsbG93TG9jYWwpIHtcbiAgICAgICAgdGxkICs9IFwiP1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnZXggKz1cbiAgICAgICAgICAvLyBJUCBhZGRyZXNzIGV4Y2x1c2lvblxuICAgICAgICAgIC8vIHByaXZhdGUgJiBsb2NhbCBuZXR3b3Jrc1xuICAgICAgICAgIFwiKD8hKD86MTB8MTI3KSg/OlxcXFwuXFxcXGR7MSwzfSl7M30pXCIgK1xuICAgICAgICAgIFwiKD8hKD86MTY5XFxcXC4yNTR8MTkyXFxcXC4xNjgpKD86XFxcXC5cXFxcZHsxLDN9KXsyfSlcIiArXG4gICAgICAgICAgXCIoPyExNzJcXFxcLig/OjFbNi05XXwyXFxcXGR8M1swLTFdKSg/OlxcXFwuXFxcXGR7MSwzfSl7Mn0pXCI7XG4gICAgICB9XG5cbiAgICAgIHJlZ2V4ICs9XG4gICAgICAgICAgLy8gSVAgYWRkcmVzcyBkb3R0ZWQgbm90YXRpb24gb2N0ZXRzXG4gICAgICAgICAgLy8gZXhjbHVkZXMgbG9vcGJhY2sgbmV0d29yayAwLjAuMC4wXG4gICAgICAgICAgLy8gZXhjbHVkZXMgcmVzZXJ2ZWQgc3BhY2UgPj0gMjI0LjAuMC4wXG4gICAgICAgICAgLy8gZXhjbHVkZXMgbmV0d29yayAmIGJyb2FjYXN0IGFkZHJlc3Nlc1xuICAgICAgICAgIC8vIChmaXJzdCAmIGxhc3QgSVAgYWRkcmVzcyBvZiBlYWNoIGNsYXNzKVxuICAgICAgICAgIFwiKD86WzEtOV1cXFxcZD98MVxcXFxkXFxcXGR8MlswMV1cXFxcZHwyMlswLTNdKVwiICtcbiAgICAgICAgICBcIig/OlxcXFwuKD86MT9cXFxcZHsxLDJ9fDJbMC00XVxcXFxkfDI1WzAtNV0pKXsyfVwiICtcbiAgICAgICAgICBcIig/OlxcXFwuKD86WzEtOV1cXFxcZD98MVxcXFxkXFxcXGR8MlswLTRdXFxcXGR8MjVbMC00XSkpXCIgK1xuICAgICAgICBcInxcIiArXG4gICAgICAgICAgLy8gaG9zdCBuYW1lXG4gICAgICAgICAgXCIoPzooPzpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0tKikqW2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldKylcIiArXG4gICAgICAgICAgLy8gZG9tYWluIG5hbWVcbiAgICAgICAgICBcIig/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldLSopKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspKlwiICtcbiAgICAgICAgICB0bGQgK1xuICAgICAgICBcIilcIiArXG4gICAgICAgIC8vIHBvcnQgbnVtYmVyXG4gICAgICAgIFwiKD86OlxcXFxkezIsNX0pP1wiICtcbiAgICAgICAgLy8gcmVzb3VyY2UgcGF0aFxuICAgICAgICBcIig/OlsvPyNdXFxcXFMqKT9cIiArXG4gICAgICBcIiRcIjtcblxuICAgICAgdmFyIFBBVFRFUk4gPSBuZXcgUmVnRXhwKHJlZ2V4LCAnaScpO1xuICAgICAgaWYgKCFQQVRURVJOLmV4ZWModmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YWxpZGF0ZS5mb3JtYXR0ZXJzID0ge1xuICAgIGRldGFpbGVkOiBmdW5jdGlvbihlcnJvcnMpIHtyZXR1cm4gZXJyb3JzO30sXG4gICAgZmxhdDogdi5mbGF0dGVuRXJyb3JzVG9BcnJheSxcbiAgICBncm91cGVkOiBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgIHZhciBhdHRyO1xuXG4gICAgICBlcnJvcnMgPSB2Lmdyb3VwRXJyb3JzQnlBdHRyaWJ1dGUoZXJyb3JzKTtcbiAgICAgIGZvciAoYXR0ciBpbiBlcnJvcnMpIHtcbiAgICAgICAgZXJyb3JzW2F0dHJdID0gdi5mbGF0dGVuRXJyb3JzVG9BcnJheShlcnJvcnNbYXR0cl0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9LFxuICAgIGNvbnN0cmFpbnQ6IGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgdmFyIGF0dHI7XG4gICAgICBlcnJvcnMgPSB2Lmdyb3VwRXJyb3JzQnlBdHRyaWJ1dGUoZXJyb3JzKTtcbiAgICAgIGZvciAoYXR0ciBpbiBlcnJvcnMpIHtcbiAgICAgICAgZXJyb3JzW2F0dHJdID0gZXJyb3JzW2F0dHJdLm1hcChmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LnZhbGlkYXRvcjtcbiAgICAgICAgfSkuc29ydCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9XG4gIH07XG5cbiAgdmFsaWRhdGUuZXhwb3NlTW9kdWxlKHZhbGlkYXRlLCB0aGlzLCBleHBvcnRzLCBtb2R1bGUsIGRlZmluZSk7XG59KS5jYWxsKHRoaXMsXG4gICAgICAgIHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyA/IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGV4cG9ydHMgOiBudWxsLFxuICAgICAgICB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIG1vZHVsZSA6IG51bGwsXG4gICAgICAgIHR5cGVvZiBkZWZpbmUgIT09ICd1bmRlZmluZWQnID8gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZGVmaW5lIDogbnVsbCk7XG4iXX0=
